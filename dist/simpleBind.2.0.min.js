var simpleBindUtil=function(e){var t=function(t,n){return"object"==typeof t&&"object"==typeof n?e.extend(n,t):t};e.extend=function(){for(var e=arguments.length;e>0;--e)for(var n in arguments[e])arguments[e-1][n]=t(arguments[e][n],arguments[e-1][n]);return arguments[0]},e.getKeys=function(e){if(Object.keys)return Object.keys(e);arr=[];for(var t in e)arr.push(t);return arr},e.getData=function(t){var n,i,d={};n=e.getAttrs(t),i=e.getKeys(n);for(var r=0;r<i.length;++r)0===i[r].indexOf("data-")&&(d[i[r].substring(5,i[r].length)]=n[i[r]]);return d},e.getAttrs=function(e){var t,n={};t=e.attributes;for(var i=0;i<t.length;++i){var d=t.item(i);n[d.nodeName]=d.hasOwnProperty("value")?d.value:d.nodeValue}return n},e.set=function(e,t,n){for(t=t.split(".");t.length>1;)e=e[t.shift()];return e[t.shift()]=n},e.get=function(e,t){if("$base"==t||""===t)return e;t=t.split(".");for(var n=0;n<t.length;++n){if("$base"==t[n])return e;if("undefined"==typeof e[t[n]])return"";e=e[t[n]]}return e};var n=new RegExp(/^[^\.]*/),i=function(e,t,i){return e==t?e=i:0==e.indexOf(t+".")&&(e=e.replace(n,i)),e};return e.replaceObjNameInBindingStr=function(e,t,n,d){if(e.indexOf(":")>-1)switch(t){case"simplebindhandler":case"simpledata":e=e.split(",");for(var r=0;r<e.length;++r)e[r]=e[r].split(":"),e[r].length>1&&(e[r][1]=i(e[r][1],n,d)),e[r]=e[r].join(":");e=e.join(",");break;case"simplerepeat":e=e.split(":"),e[1]=i(e[1],n,d),e=e.join(":");break;case"simpleevent":e=e.split(":"),e.length>=3&&(e[2]=i(e[2],n,d)),e=e.join(":")}else e=i(e,n,d);return e},e}({}),simpleBind=function(e,t,n,i){var d={bindTypes:[],bindTypeOpts:{},boundElems:{},boundObjects:{},boundObjectsLast:{},ready:!1,beforeReadyBindQueue:[],autoReBinding:!1,autoReBindingQueue:{}},r=function(){if(a(),d.ready=!0,d.beforeReadyBindQueue.length)for(var e=0;e<d.beforeReadyBindQueue.length;++e)i.bind(d.beforeReadyBindQueue[e].name,d.beforeReadyBindQueue[e].obj)},a=function(e,i){i="undefined"==typeof i?!1:i,i&&(d.autoReBinding=!0,d.autoReBindingQueue={}),e="undefined"==typeof e?t:e;for(var r=e.getElementsByTagName("*"),a=0;a<r.length;++a){var l=n.getData(r[a]);if("undefined"==typeof l.simplebindcollected)for(var o=!1,u=0;u<d.bindTypes.length;++u)"undefined"!=typeof l[d.bindTypes[u]]&&(o||(o=!0,r[a].setAttribute("data-simplebindcollected","true")),l.bindType=d.bindTypes[u],d.bindTypeOpts[d.bindTypes[u]].collection(r[a],l))}i&&(d.autoReBinding=!1,s())},l=function(e,t,n){n="undefined"==typeof n?!1:n;for(var i=0;i<e.length;++i)d.bindTypeOpts[e[i].bindType].binding&&d.bindTypeOpts[e[i].bindType].binding(e[i],t,n)},s=function(){for(var e in d.autoReBindingQueue)"undefined"!=typeof d.boundObjects[e]&&l(d.autoReBindingQueue[e],d.boundObjects[e],!0)},o=function(e,t){"undefined"==typeof d.boundObjectsLast[e]&&(d.boundObjectsLast[e]={}),d.boundObjects[e]=t,l(d.boundElems[e],t),d.boundObjectsLast[e]=n.extend({},t)};return t.addEventListener("DOMContentLoaded",function(){r()}),i.getState=function(){return d},i.registerBindType=function(e,t,n){"undefined"==typeof d.bindTypeOpts[e]&&(d.bindTypeOpts[e]={},d.bindTypes.push(e)),d.bindTypeOpts[e].collection=t,d.bindTypeOpts[e].binding=n},i.addToBoundElems=function(e,t,n){n.bindType=e,"undefined"==typeof d.boundElems[t]&&(d.boundElems[t]=[]),d.autoReBinding&&("undefined"==typeof d.autoReBindingQueue[t]&&(d.autoReBindingQueue[t]=[]),d.autoReBindingQueue[t].push(n)),d.boundElems[t].push(n)},i.recollectDOM=function(e,t){a(e,t)},i.bind=function(e,t){"string"==typeof e&&"object"==typeof t&&("undefined"==typeof d.boundElems[e]&&(d.boundElems[e]=[]),d.ready?o(e,t):d.beforeReadyBindQueue.push({name:e,obj:t}))},i}(window,document,simpleBindUtil,simpleBind||{});simpleBind=function(e,t,n,i){var d=i.getState(),r=function(e,t){t.simplebind=t.simplebind.split(".");var n={elem:e,objName:t.simplebind.shift(),objKey:t.simplebind.join("."),opts:t};i.addToBoundElems("simplebind",n.objName,n)},a=function(e,r,a){var l=n.get(r,e.objKey),s=n.get(d.boundObjectsLast[e.objName],e.objKey);(l!==s||a)&&("undefined"!=typeof e.opts.simplefilter&&(l=i.getFilteredValue(l,e.opts.simplefilter)),l="string"==typeof l?l:JSON.stringify(l,null,2),"undefined"!=typeof e.opts.simplebindhtml&&"true"==e.opts.simplebindhtml?e.elem.innerHTML=l:e.elem.childNodes.length?e.elem.childNodes[0].nodeValue=l:e.elem.appendChild(t.createTextNode(l)))};return i.registerBindType("simplebind",r,a),i}(window,document,simpleBindUtil,simpleBind||{}),simpleBind=function(e,t,n,i){var d=i.getState();d.bindHandlers={};var r=function(e,t){for(var n=t.simplebindhandler.split(","),d=0;d<n.length;++d){n[d]=n[d].split(":");var r={elem:e,handler:n[d].shift()};n[d]=n[d].shift().split("."),r.objName=n[d].shift(),r.objKey=n[d].join("."),i.addToBoundElems("simplebindhandler",r.objName,r)}},a=function(e,t,i){if("undefined"!=typeof d.bindHandlers[e.handler]){var r=n.get(t,e.objKey),a=n.get(d.boundObjectsLast[e.objName],e.objKey);(r!=a||i)&&d.bindHandlers[e.handler](e.elem,n.get(t,e.objKey))}};return i.registerBindType("simplebindhandler",r,a),i.registerBindHandler=function(e,t){"function"==typeof t&&(d.bindHandlers[e]=t)},i}(window,document,simpleBindUtil,simpleBind||{}),simpleBind=function(e,t,n,i){var d=i.getState(),r="data-simplebindvaluechanger",a=function(){var e=this.getAttribute("data-simplebindvalue").split("."),t=e.shift();if(n.set(d.boundObjects[t],e.join("."),s(this)),i.bind(t,d.boundObjects[t]),this.setAttribute(r,"true"),t.indexOf("__repeat")>-1){var a=d.repeatDictionary[t.split("-").shift()];i.bind(a,d.boundObjects[a])}},l=function(e){var t,n=e.tagName.toLowerCase();switch(n){case"input":return t=e.getAttribute("type");default:return n}},s=function(e){var t=l(e);switch(t){case"checkbox":return e.checked;case"type":default:return e.value}},o=function(e,t){switch(t){case"text":e.addEventListener("keyup",a);break;default:e.addEventListener("change",a)}},u=function(e,t){t.simplebindvalue=t.simplebindvalue.split(".");var n={elem:e,objName:t.simplebindvalue.shift(),objKey:t.simplebindvalue.join("."),inputType:l(e)};o(e,n.inputType),i.addToBoundElems("simplebindvalue",n.objName,n)},p=function(e,t,i){var d=n.get(t,e.objKey);switch(e.inputType){case"select":for(var r=e.elem.getElementsByTagName("option"),a=-1,l=0;l<r.length;++l)if(r[l].value==d){a=l;break}e.elem.selectedIndex=l;break;case"radio":e.elem.checked=d==e.elem.value;break;case"checkbox":e.elem.checked=d;break;case"text":default:(d!=e.elem.value||i)&&(e.elem.value=d)}};return i.registerBindType("simplebindvalue",u,p),i}(window,document,simpleBindUtil,simpleBind||{}),simpleBind=function(e,t,n,i){var d=i.getState();d.repeatCount=0,d.repeatDictionary={};var r=function(e,t){return"__repeat"+e.repeatIndex+"-"+e.innerObjName+t},a=function(e,t,i){for(var r=0;r<e.length;++r)for(var a=0;a<d.bindTypes.length;++a){var l="data-"+d.bindTypes[a],s=e[r].getAttribute(l);if(s){var o=n.replaceObjNameInBindingStr(s,d.bindTypes[a],t,i);o!=s?(e[r].setAttribute(l,o),e[r].removeAttribute("data-simplebindcollected")):e[r].removeAttribute("data-simplebindcollected")}}},l=function(e,n){if(e.repeatedElems.length!=n){var l;if(e.repeatedElems.length<n){l=n-e.repeatedElems.length;for(var s=t.createDocumentFragment(),o=0;l>o;++o){var u=e.repeatTemplate.cloneNode(!0),p=u.getElementsByTagName("*"),f=r(e,0),m=r(e,e.repeatedElems.length);a([u],f,m),a(p,f,m),e.repeatedElems.push(u),s.appendChild(u)}e.elem.appendChild(s),i.recollectDOM(e.elem,!0)}else{l=e.repeatedElems.length-n;for(var o=0;l>o;++o){var b=e.repeatedElems.pop(),c=r(e,e.repeatedElems.length);b.parentNode.removeChild(b),"undefined"!=typeof d.boundElems[c]&&delete d.boundElems[c]}}}},s=function(e,t){t.simplerepeat=t.simplerepeat.split(":");var n=t.simplerepeat.pop().split("."),l={elem:e,objName:n.shift(),objKey:n.join("."),innerObjName:t.simplerepeat.shift(),repeatedElems:[],repeatIndex:d.repeatCount},s=e.getElementsByTagName("*");a(s,l.innerObjName,r(l,0)),l.repeatTemplate=s[0].parentNode.removeChild(s[0]),d.repeatDictionary["__repeat"+l.repeatIndex]=l.objName,++d.repeatCount,i.addToBoundElems("simplerepeat",l.objName,l)},o=function(e,t){var d=n.get(t,e.objKey)||[];if("undefined"!=typeof d.length){l(e,d.length);for(var a=0;a<d.length;++a)i.bind(r(e,a),d[a])}};return i.registerBindType("simplerepeat",s,o),i}(window,document,simpleBindUtil,simpleBind||{}),simpleBind=function(e,t,n,i){var d=i.getState();d.eventHandlers={};var r=function(e,t){for(var i=t.simpleevent.split(","),r=0;r<i.length;++r){var a=i[r].split(":"),l=a.shift(),s=a.shift(),o=a.length?a.shift().split("."):!1;if(o)var u=o.shift(),p=o.join(".");e.addEventListener(l,function(e){return"undefined"!=typeof d.eventHandlers[s]?o&&"undefined"!=typeof d.boundObjects[u]?void d.eventHandlers[s].call(this,e,n.get(d.boundObjects[u],p)):d.eventHandlers[s].call(this,e,void 0):void 0})}};return i.registerBindType("simpleevent",r,null),i.registerEvent=function(e,t){d.eventHandlers[e]=t},i}(window,document,simpleBindUtil,simpleBind||{}),simpleBind=function(e,t,n,i){var d=(i.getState(),function(e,t){for(var n=t.simpledata.split(","),d=0;d<n.length;++d){var r=n[d].split(":"),a=r.shift();r=r.shift().split(".");var l={elem:e,objName:r.shift(),objKey:r.join("."),prop:a};i.addToBoundElems("simpledata",l.objName,l)}}),r=function(e,t){var i="data-"+e.prop.replace(/\W+/g,"-").replace(/([a-z\d])([A-Z])/g,"$1-$2");e.elem.setAttribute(i,n.get(t,e.objKey))};return i.registerBindType("simpledata",d,r),i}(window,document,simpleBindUtil,simpleBind||{}),simpleBind=function(e,t,n){return state=n.getState(),state.filters={},n.getFilteredValue=function(e,t){t=t.split(",");for(var n=0;n<t.length;++n)"undefined"!=typeof state.filters[t[n]]&&(e=state.filters[t[n]](e));return e},n.registerFilter=function(e,t){"function"==typeof t&&(state.filters[e]=t)},n}(window,document,simpleBind||{});