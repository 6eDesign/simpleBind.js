var simpleBindUtil=function(e){return e.getKeys=function(e){if(Object.keys)return Object.keys(e);arr=[];for(var t in e)arr.push(t);return arr},e.getData=function(t){var n,i,r={};n=e.getAttrs(t),i=e.getKeys(n);for(var d=0;d<i.length;++d)0===i[d].indexOf("data-")&&(r[i[d].substring(5,i[d].length)]=n[i[d]]);return r},e.getAttrs=function(e){var t,n={};t=e.attributes;for(var i=0;i<t.length;++i){var r=t.item(i);n[r.nodeName]=r.hasOwnProperty("value")?r.value:r.nodeValue}return n},e.set=function(e,t,n){for(t=t.split(".");t.length>1;)e=e[t.shift()];return e[t.shift()]=n},e.get=function(e,t){if("$base"==t||""==t)return e;t=t.split(".");for(var n=0;n<t.length;++n){if("$base"==t[n])return e;e=e[t[n]]}return e},e}({}),simpleBind=function(e,t,n,i,r){var d={bindTypes:[],bindTypeOpts:{},boundElems:{},boundObjects:{},boundObjectsLast:{},ready:!1,beforeReadyBindQueue:[]},a=function(){if(l(),d.ready=!0,d.beforeReadyBindQueue.length)for(var e=0;e<d.beforeReadyBindQueue.length;++e)r.bind(d.beforeReadyBindQueue[e].name,d.beforeReadyBindQueue[e].obj)},l=function(e){e="undefined"==typeof e?t:e;for(var n=e.getElementsByTagName("*"),r=0;r<n.length;++r){var a=i.getData(n[r]);if("undefined"==typeof a.simplebindcollected)for(var l=!1,s=0;s<d.bindTypes.length;++s)"undefined"!=typeof a[d.bindTypes[s]]&&(l||(l=!0,n[r].setAttribute("data-simplebindcollected","true")),a.bindType=d.bindTypes[s],d.bindTypeOpts[d.bindTypes[s]].collection(n[r],a))}},s=function(e,t){"undefined"==typeof d.boundObjectsLast[e]&&(d.boundObjectsLast[e]={}),d.boundObjects[e]=t;for(var i=0;i<d.boundElems[e].length;++i)d.bindTypeOpts[d.boundElems[e][i].bindType].binding&&d.bindTypeOpts[d.boundElems[e][i].bindType].binding(d.boundElems[e][i],t);d.boundObjectsLast[e]=n.extend({},t)};return n(t).ready(a),r.getState=function(){return d},r.registerBindType=function(e,t,n,i){"undefined"==typeof d.bindTypeOpts[e]&&(d.bindTypeOpts[e]={},d.bindTypes.push(e)),d.bindTypeOpts[e].collection=t,d.bindTypeOpts[e].binding=n,d.bindTypeOpts[e].objNameReplaceFn=i},r.addToBoundElems=function(e,t,n){"undefined"==typeof d.boundElems[t]&&(d.boundElems[t]=[]),n.bindType=e,d.boundElems[t].push(n)},r.recollectDOM=function(e){l(e)},r.bind=function(e,t){"string"==typeof e&&"object"==typeof t&&("undefined"==typeof d.boundElems[e]&&(d.boundElems[e]=[]),d.ready?s(e,t):d.beforeReadyBindQueue.push({name:e,obj:t}))},r}(window,document,jQuery,simpleBindUtil,simpleBind||{});simpleBind=function(e,t,n,i,r){var d=r.getState(),a=function(e,t){t.simplebind=t.simplebind.split(".");var n={elem:e,objName:t.simplebind.shift(),objKey:t.simplebind.join("."),opts:t};r.addToBoundElems("simplebind",n.objName,n)},l=function(e,n){var a=i.get(n,e.objKey),l=i.get(d.boundObjectsLast[e.objName],e.objKey);a!=l&&("undefined"!=typeof e.opts.simplefilter&&(a=r.getFilteredValue(a,e.opts.simplefilter)),a="string"==typeof a?a:JSON.stringify(a,null,2),"undefined"!=typeof e.opts.simplebindhtml&&"true"==e.opts.simplebindhtml?e.elem.innerHTML=a:e.elem.childNodes.length?e.elem.childNodes[0].nodeValue=a:e.elem.appendChild(t.createTextNode(a)))},s=new RegExp(/^[^\.]*/),o=function(e,t,n){return 0===e.indexOf(t+".")&&(e=e.replace(s,n)),e};return r.registerBindType("simplebind",a,l,o),r}(window,document,jQuery,simpleBindUtil,simpleBind||{}),simpleBind=function(e,t,n,i,r){var d=r.getState();d.bindHandlers={};var a=function(e,t){for(var n=t.simplebindhandler.split(","),i=0;i<n.length;++i){n[i]=n[i].split(":");var d={elem:e,handler:n[i].shift()};n[i]=n[i].shift().split("."),d.objName=n[i].shift(),d.objKey=n[i].join("."),r.addToBoundElems("simplebindhandler",d.objName,d)}},l=function(e,t){if("undefined"!=typeof d.bindHandlers[e.handler]){var n=i.get(t,e.objKey),r=i.get(d.boundObjectsLast[e.objName],e.objKey);n!=r&&d.bindHandlers[e.handler](e.elem,i.get(t,e.objKey))}},s=function(e,t,n){return e.replace(new RegExp(":"+t+"\\.","g"),":"+n+".")};return r.registerBindType("simplebindhandler",a,l,s),r.registerBindHandler=function(e,t){"function"==typeof t&&(d.bindHandlers[e]=t)},r}(window,document,jQuery,simpleBindUtil,simpleBind||{}),simpleBind=function(e,t,n,i,r){var d=r.getState(),a="data-simplebindvaluechanger",l=function(){var e=this.getAttribute("data-simplebindvalue").split("."),t=e.shift();if(i.set(d.boundObjects[t],e.join("."),o(this)),r.bind(t,d.boundObjects[t]),this.setAttribute(a,"true"),t.indexOf("__repeat")>-1){var n=d.repeatDictionary[t.split("-").shift()];r.bind(n,d.boundObjects[n])}},s=function(e){var t,n=e.tagName.toLowerCase();switch(n){case"input":return t=e.getAttribute("type");default:return n}},o=function(e){var t=s(e);switch(t){case"checkbox":return e.checked;case"type":default:return e.value}},p=function(e,t){switch(t){case"text":n(e).on("keyup",l);break;default:n(e).on("change",l)}},u=function(e,t){t.simplebindvalue=t.simplebindvalue.split(".");var n={elem:e,objName:t.simplebindvalue.shift(),objKey:t.simplebindvalue.join("."),inputType:s(e)};p(e,n.inputType),r.addToBoundElems("simplebindvalue",n.objName,n)},f=function(e,t){var n=i.get(t,e.objKey);switch(e.inputType){case"select":for(var r=e.elem.getElementsByTagName("option"),d=-1,a=0;a<r.length;++a)if(r[a].value==n){d=a;break}e.elem.selectedIndex=a;break;case"radio":e.elem.checked=n==e.elem.value;break;case"checkbox":e.elem.checked=n;break;case"text":default:n!=e.elem.value&&(e.elem.value=n)}},b=new RegExp(/^[^\.]*/),m=function(e,t,n){return 0===e.indexOf(t+".")&&(e=e.replace(b,n)),e};return r.registerBindType("simplebindvalue",u,f,m),r}(window,document,jQuery,simpleBindUtil,simpleBind||{}),simpleBind=function(e,t,n,i,r){var d=r.getState();d.repeatCount=0,d.repeatDictionary={};var a=function(e,t){return"__repeat"+e.repeatIndex+"-"+e.innerObjName+t},l=function(e,t,n){for(var i=0;i<e.length;++i)for(var r=([].concat(d.bindTypes),0);r<d.bindTypes.length;++r){var a="data-"+d.bindTypes[r],l=e[i].getAttribute(a);if(l){var s=d.bindTypeOpts[d.bindTypes[r]].objNameReplaceFn(l,t,n);s!=l&&(e[i].setAttribute(a,s),e[i].removeAttribute("data-simplebindcollected"))}}},s=function(e,n){if(e.repeatedElems.length!=n){var i;if(e.repeatedElems.length<n){i=n-e.repeatedElems.length;for(var s=t.createDocumentFragment(),o=0;i>o;++o){var p=e.repeatTemplate.cloneNode(!0),u=p.getElementsByTagName("*"),f=a(e,0),b=a(e,e.repeatedElems.length);l([p],f,b),l(u,f,b),e.repeatedElems.push(p),s.appendChild(p)}e.elem.appendChild(s),r.recollectDOM(e.elem)}else{i=e.repeatedElems.length-n;for(var o=0;i>o;++o){var m=e.repeatedElems.pop(),c=a(e,e.repeatedElems.length);m.parentNode.removeChild(m),"undefined"!=typeof d.boundElems[c]&&delete d.boundElems[c]}}}},o=function(e,t){t.simplerepeat=t.simplerepeat.split(":");var n=t.simplerepeat.pop().split("."),i={elem:e,objName:n.shift(),objKey:n.join("."),innerObjName:t.simplerepeat.shift(),repeatedElems:[],repeatIndex:d.repeatCount},s=e.getElementsByTagName("*");l(s,i.innerObjName,a(i,0)),i.repeatTemplate=s[0].parentNode.removeChild(s[0]),d.repeatDictionary["__repeat"+i.repeatIndex]=i.objName,++d.repeatCount,r.addToBoundElems("simplerepeat",i.objName,i)},p=function(e,t){var n=i.get(t,e.objKey)||[];if("undefined"!=typeof n.length){s(e,n.length);for(var d=0;d<n.length;++d)r.bind(a(e,d),n[d])}};return r.registerBindType("simplerepeat",o,p),r}(window,document,jQuery,simpleBindUtil,simpleBind||{}),simpleBind=function(e,t,n,i,r){var d=r.getState();d.eventHandlers={};var a=function(e,t){for(var n=t.simpleevent.split(","),r=0;r<n.length;++r){var a=n[r].split(":"),l=a.shift(),s=a.shift(),o=a.length?a.shift().split("."):!1;if(o)var p=o.shift(),u=o.join(".");e.addEventListener(l,function(e){return"undefined"!=typeof d.eventHandlers[s]?o&&"undefined"!=typeof d.boundObjects[p]?void d.eventHandlers[s].call(this,e,i.get(d.boundObjects[p],u)):d.eventHandlers[s].call(this,e,void 0):void 0})}},l=function(e,t,n){e=e.split(",");for(var i=0;i<e.length;++i)e[i]=e[i].split(":"),e[i].length>2&&0==e[i][2].indexOf(t+".")&&(e[i][2]=e[i][2].replace(t,n)),e[i]=e[i].join(":");return e.join(",")};return r.registerBindType("simpleevent",a,null,l),r.registerEvent=function(e,t){d.eventHandlers[e]=t},r}(window,document,jQuery,simpleBindUtil,simpleBind||{}),simpleBind=function(e,t,n,i,r){var d=(r.getState(),function(e,t){for(var n=t.simpledata.split(","),i=0;i<n.length;++i){var d=n[i].split(":"),a=d.shift();d=d.shift().split(".");var l={elem:e,objName:d.shift(),objKey:d.join("."),prop:a};r.addToBoundElems("simpledata",l.objName,l)}}),a=function(e,t){var n="data-"+e.prop.replace(/\W+/g,"-").replace(/([a-z\d])([A-Z])/g,"$1-$2");e.elem.setAttribute(n,i.get(t,e.objKey))},l=function(e,t,n){return e.replace(new RegExp(":"+t+"\\.","g"),":"+n+".")};return r.registerBindType("simpledata",d,a,l),r}(window,document,jQuery,simpleBindUtil,simpleBind||{}),simpleBind=function(e,t,n,i){return state=i.getState(),state.filters={},i.getFilteredValue=function(e,t){t=t.split(",");for(var n=0;n<t.length;++n)"undefined"!=typeof state.filters[t[n]]&&(e=state.filters[t[n]](e));return e},i.registerFilter=function(e,t){"function"==typeof t&&(state.filters[e]=t)},i}(window,document,jQuery,simpleBind||{});