var simpleBindUtil=function(e){e.getKeys=function(e){if(Object.keys)return Object.keys(e);arr=[];for(var t in e)arr.push(t);return arr},e.getData=function(t){var n,i,d={};n=e.getAttrs(t),i=e.getKeys(n);for(var r=0;r<i.length;++r)0===i[r].indexOf("data-")&&(d[i[r].substring(5,i[r].length)]=n[i[r]]);return d},e.getAttrs=function(e){var t,n={};t=e.attributes;for(var i=0;i<t.length;++i){var d=t.item(i);n[d.nodeName]=d.hasOwnProperty("value")?d.value:d.nodeValue}return n},e.set=function(e,t,n){for(t=t.split(".");t.length>1;)e=e[t.shift()];return e[t.shift()]=n},e.get=function(e,t){if("$base"==t||""===t)return e;t=t.split(".");for(var n=0;n<t.length;++n){if("$base"==t[n])return e;if("undefined"==typeof e[t[n]])return"";e=e[t[n]]}return e};var t=new RegExp(/^[^\.]*/),n=function(e,n,i){return e==n?e=i:0==e.indexOf(n+".")&&(e=e.replace(t,i)),e};return e.replaceObjNameInBindingStr=function(e,t,i,d){if(e.indexOf(":")>-1)switch(t){case"simplebindhandler":case"simpledata":e=e.split(",");for(var r=0;r<e.length;++r)e[r]=e[r].split(":"),e[r].length>1&&(e[r][1]=n(e[r][1],i,d)),e[r]=e[r].join(":");e=e.join(",");break;case"simplerepeat":e=e.split(":"),e[1]=n(e[1],i,d),e=e.join(":");break;case"simpeevent":e=e.split(":"),e.length>=3&&(e[2]=n(e[2],i,d)),e=e.join(":")}else e=n(e,i,d);return e},e}({}),simpleBind=function(e,t,n,i,d){var r={bindTypes:[],bindTypeOpts:{},boundElems:{},boundObjects:{},boundObjectsLast:{},ready:!1,beforeReadyBindQueue:[],autoReBinding:!1,autoReBindingQueue:{}},a=function(){if(l(),r.ready=!0,r.beforeReadyBindQueue.length)for(var e=0;e<r.beforeReadyBindQueue.length;++e)d.bind(r.beforeReadyBindQueue[e].name,r.beforeReadyBindQueue[e].obj)},l=function(e,n){n="undefined"==typeof n?!1:n,n&&(r.autoReBinding=!0,r.autoReBindingQueue={}),e="undefined"==typeof e?t:e;for(var d=e.getElementsByTagName("*"),a=0;a<d.length;++a){var l=i.getData(d[a]);if("undefined"==typeof l.simplebindcollected)for(var s=!1,u=0;u<r.bindTypes.length;++u)"undefined"!=typeof l[r.bindTypes[u]]&&(s||(s=!0,d[a].setAttribute("data-simplebindcollected","true")),l.bindType=r.bindTypes[u],r.bindTypeOpts[r.bindTypes[u]].collection(d[a],l))}n&&(r.autoReBinding=!1,o())},s=function(e,t,n){n="undefined"==typeof n?!1:n;for(var i=0;i<e.length;++i)r.bindTypeOpts[e[i].bindType].binding&&r.bindTypeOpts[e[i].bindType].binding(e[i],t,n)},o=function(){for(var e in r.autoReBindingQueue)"undefined"!=typeof r.boundObjects[e]&&s(r.autoReBindingQueue[e],r.boundObjects[e],!0)},u=function(e,t){"undefined"==typeof r.boundObjectsLast[e]&&(r.boundObjectsLast[e]={}),r.boundObjects[e]=t,s(r.boundElems[e],t),r.boundObjectsLast[e]=n.extend({},t)};return n(t).ready(a),d.getState=function(){return r},d.registerBindType=function(e,t,n,i){"undefined"==typeof r.bindTypeOpts[e]&&(r.bindTypeOpts[e]={},r.bindTypes.push(e)),r.bindTypeOpts[e].collection=t,r.bindTypeOpts[e].binding=n,r.bindTypeOpts[e].objNameReplaceFn=i},d.addToBoundElems=function(e,t,n){n.bindType=e,"undefined"==typeof r.boundElems[t]&&(r.boundElems[t]=[]),r.autoReBinding&&("undefined"==typeof r.autoReBindingQueue[t]&&(r.autoReBindingQueue[t]=[]),r.autoReBindingQueue[t].push(n)),r.boundElems[t].push(n)},d.recollectDOM=function(e,t){l(e,t)},d.bind=function(e,t){"string"==typeof e&&"object"==typeof t&&("undefined"==typeof r.boundElems[e]&&(r.boundElems[e]=[]),r.ready?u(e,t):r.beforeReadyBindQueue.push({name:e,obj:t}))},d}(window,document,jQuery,simpleBindUtil,simpleBind||{});simpleBind=function(e,t,n,i,d){var r=d.getState(),a=function(e,t){t.simplebind=t.simplebind.split(".");var n={elem:e,objName:t.simplebind.shift(),objKey:t.simplebind.join("."),opts:t};d.addToBoundElems("simplebind",n.objName,n)},l=function(e,n,a){var l=i.get(n,e.objKey),s=i.get(r.boundObjectsLast[e.objName],e.objKey);(l!==s||a)&&("undefined"!=typeof e.opts.simplefilter&&(l=d.getFilteredValue(l,e.opts.simplefilter)),l="string"==typeof l?l:JSON.stringify(l,null,2),"undefined"!=typeof e.opts.simplebindhtml&&"true"==e.opts.simplebindhtml?e.elem.innerHTML=l:e.elem.childNodes.length?e.elem.childNodes[0].nodeValue=l:e.elem.appendChild(t.createTextNode(l)))};return d.registerBindType("simplebind",a,l),d}(window,document,jQuery,simpleBindUtil,simpleBind||{}),simpleBind=function(e,t,n,i,d){var r=d.getState();r.bindHandlers={};var a=function(e,t){for(var n=t.simplebindhandler.split(","),i=0;i<n.length;++i){n[i]=n[i].split(":");var r={elem:e,handler:n[i].shift()};n[i]=n[i].shift().split("."),r.objName=n[i].shift(),r.objKey=n[i].join("."),d.addToBoundElems("simplebindhandler",r.objName,r)}},l=function(e,t,n){if("undefined"!=typeof r.bindHandlers[e.handler]){var d=i.get(t,e.objKey),a=i.get(r.boundObjectsLast[e.objName],e.objKey);(d!=a||n)&&r.bindHandlers[e.handler](e.elem,i.get(t,e.objKey))}};return d.registerBindType("simplebindhandler",a,l),d.registerBindHandler=function(e,t){"function"==typeof t&&(r.bindHandlers[e]=t)},d}(window,document,jQuery,simpleBindUtil,simpleBind||{}),simpleBind=function(e,t,n,i,d){var r=d.getState(),a="data-simplebindvaluechanger",l=function(){var e=this.getAttribute("data-simplebindvalue").split("."),t=e.shift();if(i.set(r.boundObjects[t],e.join("."),o(this)),d.bind(t,r.boundObjects[t]),this.setAttribute(a,"true"),t.indexOf("__repeat")>-1){var n=r.repeatDictionary[t.split("-").shift()];d.bind(n,r.boundObjects[n])}},s=function(e){var t,n=e.tagName.toLowerCase();switch(n){case"input":return t=e.getAttribute("type");default:return n}},o=function(e){var t=s(e);switch(t){case"checkbox":return e.checked;case"type":default:return e.value}},u=function(e,t){switch(t){case"text":n(e).on("keyup",l);break;default:n(e).on("change",l)}},p=function(e,t){t.simplebindvalue=t.simplebindvalue.split(".");var n={elem:e,objName:t.simplebindvalue.shift(),objKey:t.simplebindvalue.join("."),inputType:s(e)};u(e,n.inputType),d.addToBoundElems("simplebindvalue",n.objName,n)},f=function(e,t,n){var d=i.get(t,e.objKey);switch(e.inputType){case"select":for(var r=e.elem.getElementsByTagName("option"),a=-1,l=0;l<r.length;++l)if(r[l].value==d){a=l;break}e.elem.selectedIndex=l;break;case"radio":e.elem.checked=d==e.elem.value;break;case"checkbox":e.elem.checked=d;break;case"text":default:(d!=e.elem.value||n)&&(e.elem.value=d)}};return d.registerBindType("simplebindvalue",p,f),d}(window,document,jQuery,simpleBindUtil,simpleBind||{}),simpleBind=function(e,t,n,i,d){var r=d.getState();r.repeatCount=0,r.repeatDictionary={};var a=function(e,t){return"__repeat"+e.repeatIndex+"-"+e.innerObjName+t},l=function(e,t,n){for(var d=0;d<e.length;++d)for(var a=0;a<r.bindTypes.length;++a){var l="data-"+r.bindTypes[a],s=e[d].getAttribute(l);if(s){var o=i.replaceObjNameInBindingStr(s,r.bindTypes[a],t,n);o!=s?(e[d].setAttribute(l,o),e[d].removeAttribute("data-simplebindcollected")):e[d].removeAttribute("data-simplebindcollected")}}},s=function(e,n){if(e.repeatedElems.length!=n){var i;if(e.repeatedElems.length<n){i=n-e.repeatedElems.length;for(var s=t.createDocumentFragment(),o=0;i>o;++o){var u=e.repeatTemplate.cloneNode(!0),p=u.getElementsByTagName("*"),f=a(e,0),b=a(e,e.repeatedElems.length);l([u],f,b),l(p,f,b),e.repeatedElems.push(u),s.appendChild(u)}e.elem.appendChild(s),d.recollectDOM(e.elem,!0)}else{i=e.repeatedElems.length-n;for(var o=0;i>o;++o){var m=e.repeatedElems.pop(),c=a(e,e.repeatedElems.length);m.parentNode.removeChild(m),"undefined"!=typeof r.boundElems[c]&&delete r.boundElems[c]}}}},o=function(e,t){t.simplerepeat=t.simplerepeat.split(":");var n=t.simplerepeat.pop().split("."),i={elem:e,objName:n.shift(),objKey:n.join("."),innerObjName:t.simplerepeat.shift(),repeatedElems:[],repeatIndex:r.repeatCount},s=e.getElementsByTagName("*");l(s,i.innerObjName,a(i,0)),i.repeatTemplate=s[0].parentNode.removeChild(s[0]),r.repeatDictionary["__repeat"+i.repeatIndex]=i.objName,++r.repeatCount,d.addToBoundElems("simplerepeat",i.objName,i)},u=function(e,t){var n=i.get(t,e.objKey)||[];if("undefined"!=typeof n.length){s(e,n.length);for(var r=0;r<n.length;++r)d.bind(a(e,r),n[r])}};return d.registerBindType("simplerepeat",o,u),d}(window,document,jQuery,simpleBindUtil,simpleBind||{}),simpleBind=function(e,t,n,i,d){var r=d.getState();r.eventHandlers={};var a=function(e,t){for(var n=t.simpleevent.split(","),d=0;d<n.length;++d){var a=n[d].split(":"),l=a.shift(),s=a.shift(),o=a.length?a.shift().split("."):!1;if(o)var u=o.shift(),p=o.join(".");e.addEventListener(l,function(e){return"undefined"!=typeof r.eventHandlers[s]?o&&"undefined"!=typeof r.boundObjects[u]?void r.eventHandlers[s].call(this,e,i.get(r.boundObjects[u],p)):r.eventHandlers[s].call(this,e,void 0):void 0})}};return d.registerBindType("simpleevent",a,null),d.registerEvent=function(e,t){r.eventHandlers[e]=t},d}(window,document,jQuery,simpleBindUtil,simpleBind||{}),simpleBind=function(e,t,n,i,d){var r=(d.getState(),function(e,t){for(var n=t.simpledata.split(","),i=0;i<n.length;++i){var r=n[i].split(":"),a=r.shift();r=r.shift().split(".");var l={elem:e,objName:r.shift(),objKey:r.join("."),prop:a};d.addToBoundElems("simpledata",l.objName,l)}}),a=function(e,t){var n="data-"+e.prop.replace(/\W+/g,"-").replace(/([a-z\d])([A-Z])/g,"$1-$2");e.elem.setAttribute(n,i.get(t,e.objKey))};return d.registerBindType("simpledata",r,a),d}(window,document,jQuery,simpleBindUtil,simpleBind||{}),simpleBind=function(e,t,n,i){return state=i.getState(),state.filters={},i.getFilteredValue=function(e,t){t=t.split(",");for(var n=0;n<t.length;++n)"undefined"!=typeof state.filters[t[n]]&&(e=state.filters[t[n]](e));return e},i.registerFilter=function(e,t){"function"==typeof t&&(state.filters[e]=t)},i}(window,document,jQuery,simpleBind||{});