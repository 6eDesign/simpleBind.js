var simpleBind=function(e){return e}({});simpleBind.util=function(e){var t=function(e){var t=typeof e;switch(t){case"object":return e instanceof Array?"array":t;default:return t}},n=function(n){for(var i=1,r=n.length;r>i;++i){var d=n[i],a=n[0];for(var o in d){var s="object"!=t(a[o])&&"object"!=t(d[o]);s?a[o]=d[o]:a[o]=e.extend("undefined"==typeof a[o]?{}:a[o],d[o])}}return n.length?n[0]:{}};e.delay=function(){var e=0;return function(t,n){clearTimeout(e),e=setTimeout(t,n)}}(),e.extend=function(){return n(arguments)},e.getKeys=function(e){if(Object.keys)return Object.keys(e);arr=[];for(var t in e)arr.push(t);return arr},e.getData=function(t){var n,i,r={};n=e.getAttrs(t),i=e.getKeys(n);for(var d=0;d<i.length;++d)0===i[d].indexOf("data-")&&(r[i[d].substring(5,i[d].length)]=n[i[d]]);return r},e.getAttrs=function(e){var t,n={};t=e.attributes;for(var i=0;i<t.length;++i){var r=t.item(i);n[r.nodeName]=r.hasOwnProperty("value")?r.value:r.nodeValue}return n},e.set=function(e,t,n){t=t.split(".");for(var i=t.pop();t.length;){var r=t.shift();e[r]="undefined"==typeof e[r]?{}:e[r],e=e[r]}e[i]=n},e.get=function(e,t){if("$base"==t||""===t)return e;t=t.split(".");for(var n=0;n<t.length;++n){if("$base"==t[n])return e;if(null==e)return"";if("undefined"==typeof e[t[n]])return"";if(null===e)return"";e=e[t[n]]}return e};var i=new RegExp(/^[^\.]*/),r=function(e,t,n){return e==t?e=n:0==e.indexOf(t+".")&&(e=e.replace(i,n)),e};return e.replaceObjNameInBindingStr=function(e,t,n,i){if(e.indexOf(":")>-1)switch(t){case"simplerepeat":e=e.split(":"),e[1]=r(e[1],n,i),e=e.join(":");break;case"simpleevent":e=e.split(":"),e.length>=3&&(e[2]=r(e[2],n,i)),e=e.join(":");break;case"simplebindhandler":case"simpledata":case"simplebindattrs":default:e=e.split(",");for(var d=0;d<e.length;++d)e[d]=e[d].split(":"),e[d].length>1&&(e[d][1]=r(e[d][1],n,i)),e[d]=e[d].join(":");e=e.join(",")}else e=r(e,n,i);return e},e}({}),simpleBind=function(e,t,n,i){var r={bindTypes:[],bindTypeOpts:{},boundElems:{},boundObjects:{},boundObjectsLast:{},ready:!1,beforeReadyBindQueue:[],autoReBinding:!1,autoReBindingQueue:{}},d=function(){if(a(),r.ready=!0,r.beforeReadyBindQueue.length)for(var e=0;e<r.beforeReadyBindQueue.length;++e)i.bind(r.beforeReadyBindQueue[e].name,r.beforeReadyBindQueue[e].obj)},a=function(e,i){i="undefined"==typeof i?!1:i,i&&(r.autoReBinding=!0,r.autoReBindingQueue={}),e="undefined"==typeof e?t:e;for(var d=e.getElementsByTagName("*"),a=0;a<d.length;++a){var o=n.getData(d[a]);if("undefined"==typeof o.simplebindcollected)for(var l=!1,u=0;u<r.bindTypes.length;++u)"undefined"!=typeof o[r.bindTypes[u]]&&(l||(l=!0,d[a].setAttribute("data-simplebindcollected","true")),o.bindType=r.bindTypes[u],r.bindTypeOpts[r.bindTypes[u]].collection(d[a],o))}i&&(r.autoReBinding=!1,s())},o=function(e,t,n){n="undefined"==typeof n?!1:n;for(var i=0;i<e.length;++i)r.bindTypeOpts[e[i].bindType].binding&&r.bindTypeOpts[e[i].bindType].binding(e[i],t,n)},s=function(){for(var e in r.autoReBindingQueue)"undefined"!=typeof r.boundObjects[e]&&o(r.autoReBindingQueue[e],r.boundObjects[e],!0)},l=function(e,t){"undefined"==typeof r.boundObjectsLast[e]&&(r.boundObjectsLast[e]={}),r.boundObjects[e]=t,"undefined"!=typeof r.boundElems[e]&&(o(r.boundElems[e],t),r.boundObjectsLast[e]=n.extend({},t))};return t.addEventListener("DOMContentLoaded",function(){d()}),i.getState=function(){return r},i.registerBindType=function(e,t,n){"undefined"==typeof r.bindTypeOpts[e]&&(r.bindTypeOpts[e]={},r.bindTypes.push(e)),r.bindTypeOpts[e].collection=t,r.bindTypeOpts[e].binding=n},i.addToBoundElems=function(e,t,n){n.bindType=e,"undefined"==typeof r.boundElems[t]&&(r.boundElems[t]=[]),r.autoReBinding&&("undefined"==typeof r.autoReBindingQueue[t]&&(r.autoReBindingQueue[t]=[]),r.autoReBindingQueue[t].push(n)),r.boundElems[t].push(n)},i.recollectDOM=function(e,t){a(e,t)},i.bind=function(e,t){"string"==typeof e&&"object"==typeof t&&("undefined"==typeof r.boundElems[e]&&(r.boundElems[e]=[]),r.ready?l(e,t):r.beforeReadyBindQueue.push({name:e,obj:t}))},i}(window,document,simpleBind.util,simpleBind||{}),simpleBind=function(e,t,n,i){var r=i.getState(),d=function(e,t){t.simplebind=t.simplebind.split(".");var n={elem:e,objName:t.simplebind.shift(),objKey:t.simplebind.join("."),opts:t};i.addToBoundElems("simplebind",n.objName,n)},a=function(e,d,a){var o=n.get(d,e.objKey),s=n.get(r.boundObjectsLast[e.objName],e.objKey);(o!==s||a)&&("undefined"!=typeof e.opts.simplefilter&&(o=i.getFilteredValue(o,e.opts.simplefilter)),o="string"==typeof o?o:JSON.stringify(o,null,2),"undefined"!=typeof e.opts.simplebindhtml&&"true"==e.opts.simplebindhtml?e.elem.innerHTML=o:e.elem.childNodes.length?e.elem.childNodes[0].nodeValue=o:e.elem.appendChild(t.createTextNode(o)))};return i.registerBindType("simplebind",d,a),i}(window,document,simpleBind.util,simpleBind||{}),simpleBind=function(e,t,n,i){var r=i.getState();r.bindHandlers={};var d=function(e,t){for(var n=t.simplebindhandler.split(","),r=0;r<n.length;++r){n[r]=n[r].split(":");var d={elem:e,handler:n[r].shift()};n[r]=n[r].shift().split("."),d.objName=n[r].shift(),d.objKey=n[r].join("."),i.addToBoundElems("simplebindhandler",d.objName,d)}},a=function(e,t,i){if("undefined"!=typeof r.bindHandlers[e.handler]){var d=n.get(t,e.objKey),a=n.get(r.boundObjectsLast[e.objName],e.objKey),o="object"==typeof d?JSON.stringify(d)!=JSON.stringify(a):d!=a;(o||i)&&r.bindHandlers[e.handler](e.elem,n.get(t,e.objKey),e.objName)}};return i.registerBindType("simplebindhandler",d,a),i.registerBindHandler=function(e,t){"function"==typeof t&&(r.bindHandlers[e]=t)},i}(window,document,simpleBind.util,simpleBind||{}),simpleBind=function(e,t,n,i){var r=i.getState(),d="data-simplebindvaluechanger",a=function(){var e=this.getAttribute("data-simplebindvalue").split("."),t=e.shift();if("undefined"==typeof r.boundObjects[t]&&(r.boundObjects[t]={}),n.set(r.boundObjects[t],e.join("."),u(this)),i.bind(t,r.boundObjects[t]),this.setAttribute(d,"true"),t.indexOf("__repeat")>-1){var a=r.repeatDictionary[t.split("-").shift()];i.bind(a,r.boundObjects[a])}},o=function(){var e=this;n.delay(function(){a.call(e)},50)},s=function(e){var t,n=e.tagName.toLowerCase();switch(n){case"input":return t=e.getAttribute("type");default:return n}},l=function(e,t){var n=s(e);switch(n){case"checkbox":return String(e.checked)!=String(t);case"radio":var i=u(e);return e.checked&&i!=String(t)||!e.checked&&i==String(t);default:var r=u(e);return t!=r}},u=function(e){var t=s(e);switch(t){case"checkbox":return e.checked;default:return e.value}},p=function(e,t){switch(t){case"text":case"password":case"textarea":e.addEventListener("keyup",o);default:e.addEventListener("change",a)}},f=function(e,t){t.simplebindvalue=t.simplebindvalue.split(".");var n={elem:e,objName:t.simplebindvalue.shift(),objKey:t.simplebindvalue.join("."),inputType:s(e),initiatedChange:!1};p(e,n.inputType),i.addToBoundElems("simplebindvalue",n.objName,n)},b=function(e,t,i){var r=n.get(t,e.objKey);if(l(e.elem,r)){switch(e.inputType){case"select":for(var d=e.elem.getElementsByTagName("option"),a=0,o=0;o<d.length;++o)if(d[o].value==r){a=o;break}e.elem.selectedIndex=a;break;case"radio":e.elem.checked=String(r)==e.elem.value;break;case"checkbox":e.elem.checked=r===!0||"true"==r;break;case"textarea":e.elem.innerHTML!=r&&(e.elem.innerHTML=r);break;case"text":default:(r!=e.elem.value||i)&&(e.elem.value=r)}c(e.elem,"change")}},c=function(e,n){if("createEvent"in t){var i=t.createEvent("HTMLEvents");i.initEvent(n,!1,!0),e.dispatchEvent(i)}else e.fireEvent("on"+n)};return i.registerBindType("simplebindvalue",f,b),i}(window,document,simpleBind.util,simpleBind||{}),simpleBind=function(e,t,n,i){var r=i.getState();r.repeatCount=0,r.repeatDictionary={};var d=function(e,t){return"__repeat"+e.repeatIndex+"-"+e.innerObjName+t},a=function(e,t,i){for(var d=0;d<e.length;++d)for(var a=0;a<r.bindTypes.length;++a){var o="data-"+r.bindTypes[a],s=e[d].getAttribute(o);if(s){var l=n.replaceObjNameInBindingStr(s,r.bindTypes[a],t,i);l!=s?(e[d].setAttribute(o,l),e[d].removeAttribute("data-simplebindcollected")):e[d].removeAttribute("data-simplebindcollected")}}},o=function(e,n){if(e.repeatedElems.length!=n){var o;if(e.repeatedElems.length<n){o=n-e.repeatedElems.length;for(var s=t.createDocumentFragment(),l=0;o>l;++l){var u=e.repeatTemplate.cloneNode(!0),p=u.getElementsByTagName("*"),f=d(e,0),b=d(e,e.repeatedElems.length);a([u],f,b),a(p,f,b),e.repeatedElems.push(u),s.appendChild(u)}e.elem.appendChild(s),i.recollectDOM(e.elem,!0)}else{o=e.repeatedElems.length-n;for(var l=0;o>l;++l){var c=e.repeatedElems.pop(),m=d(e,e.repeatedElems.length);c.parentNode.removeChild(c),"undefined"!=typeof r.boundElems[m]&&delete r.boundElems[m],"undefined"!=typeof r.boundObjects[m]&&delete r.boundObjects[m],"undefined"!=typeof r.boundObjectsLast[m]&&delete r.boundObjectsLast[m]}}}},s=function(e,t){t.simplerepeat=t.simplerepeat.split(":");var n=t.simplerepeat.pop().split("."),o={elem:e,objName:n.shift(),objKey:n.join("."),innerObjName:t.simplerepeat.shift(),repeatedElems:[],repeatIndex:r.repeatCount},s=e.getElementsByTagName("*");a(s,o.innerObjName,d(o,0)),o.repeatTemplate=s[0].parentNode.removeChild(s[0]),r.repeatDictionary["__repeat"+o.repeatIndex]=o.objName,++r.repeatCount,i.addToBoundElems("simplerepeat",o.objName,o)},l=function(e,t){var r=n.get(t,e.objKey)||[];if("undefined"!=typeof r.length){o(e,r.length);for(var a=0;a<r.length;++a)i.bind(d(e,a),r[a])}};return i.registerBindType("simplerepeat",s,l),i.rewriteBindings=function(e,t,n){a(e,t,n)},i}(window,document,simpleBind.util,simpleBind||{}),simpleBind=function(e,t,n,i){var r=i.getState();r.eventHandlers={};var d=function(e,t){for(var i=t.simpleevent.split(","),d=0;d<i.length;++d){var a=i[d].split(":"),o=a.shift(),s=a.shift(),l=a.length?a.shift().split("."):!1;if(l)var u=l.shift(),p=l.join(".");e.addEventListener(o,function(e){return"undefined"!=typeof r.eventHandlers[s]?l&&"undefined"!=typeof r.boundObjects[u]?void r.eventHandlers[s].call(this,e,n.get(r.boundObjects[u],p)):r.eventHandlers[s].call(this,e,void 0):void 0})}};return i.registerBindType("simpleevent",d,null),i.registerEvent=function(e,t){r.eventHandlers[e]=t},i}(window,document,simpleBind.util,simpleBind||{}),simpleBind=function(e,t,n,i){var r=simpleBind.getState(),d=function(e,t){for(var n=t.simplebindattrs.split(","),r=0;r<n.length;++r){n[r]=n[r].split(":");var d={elem:e,attr:n[r].shift()};n[r]=n[r].shift().split("."),d.objName=n[r].shift(),d.objKey=n[r].join("."),i.addToBoundElems("simplebindattrs",d.objName,d)}},a=function(e,t,i){var d=n.get(t,e.objKey),a=n.get(r.boundObjectsLast[e.objName],e.objKey);(d!=a||i)&&e.elem.setAttribute(e.attr,d)};return i.registerBindType("simplebindattrs",d,a),i}(window,document,simpleBind.util,simpleBind||{}),simpleBind=function(e,t,n,i){var r=(i.getState(),function(e,t){for(var n=t.simpledata.split(","),r=0;r<n.length;++r){var d=n[r].split(":"),a=d.shift();d=d.shift().split(".");var o={elem:e,objName:d.shift(),objKey:d.join("."),prop:a};i.addToBoundElems("simpledata",o.objName,o)}}),d=function(e,t){var i="data-"+e.prop.replace(/\W+/g,"-").replace(/([a-z\d])([A-Z])/g,"$1-$2");e.elem.setAttribute(i,n.get(t,e.objKey))};return i.registerBindType("simpledata",r,d),i}(window,document,simpleBind.util,simpleBind||{}),simpleBind=function(e,t,n){var i=n.getState();return i.filters={},n.getFilteredValue=function(e,t){t=t.split(",");for(var n=0;n<t.length;++n)"undefined"!=typeof i.filters[t[n]]&&(e=i.filters[t[n]](e));return e},n.registerFilter=function(e,t){"function"==typeof t&&(i.filters[e]=t)},n}(window,document,simpleBind||{});