var simpleBindUtil=function(e){return e.getKeys=function(e){if(Object.keys)return Object.keys(e);arr=[];for(var t in e)arr.push(t);return arr},e.getData=function(t){var n,i,r={};n=e.getAttrs(t),i=e.getKeys(n);for(var d=0;d<i.length;++d)0==i[d].indexOf("data-")&&(r[i[d].substring(5,i[d].length)]=n[i[d]]);return r},e.getAttrs=function(e){var t,n={};t=e.attributes;for(var i=0;i<t.length;++i){var r=t.item(i);n[r.nodeName]=r.hasOwnProperty("value")?r.value:r.nodeValue}return n},e.set=function(e,t,n){for(t=t.split(".");t.length>1;)e=e[t.shift()];return e[t.shift()]=n},e.get=function(e,t){if("$base"==t)return e;t=t.split(".");for(var n=0;n<t.length;++n){if("$base"==t[n])return e;e=e[t[n]]}return e},e}({}),simpleBind=function(e,t,n,i,r){var d={bindTypes:[],bindTypeOpts:{},boundElems:{},boundObjects:{},boundObjectsLast:{}},l=function(){a()},a=function(e){e="undefined"==typeof e?t:e;for(var n=e.getElementsByTagName("*"),r=0;r<n.length;++r){var l=i.getData(n[r]);if("undefined"==typeof l.simplebindcollected)for(var a=!1,s=0;s<d.bindTypes.length;++s)"undefined"!=typeof l[d.bindTypes[s]]&&(a||(a=!0,n[r].setAttribute("data-simplebindcollected","true")),l.bindType=d.bindTypes[s],d.bindTypeOpts[d.bindTypes[s]].collection(n[r],l))}},s=function(e,t){"undefined"==typeof d.boundObjectsLast[e]&&(d.boundObjectsLast[e]={}),d.boundObjects[e]=t;for(var i=0;i<d.boundElems[e].length;++i)d.bindTypeOpts[d.boundElems[e][i].bindType].binding&&d.bindTypeOpts[d.boundElems[e][i].bindType].binding(d.boundElems[e][i],t);d.boundObjectsLast[e]=n.extend({},t)};return n(t).ready(l),r.getState=function(){return d},r.registerBindType=function(e,t,n,i){"undefined"==typeof d.bindTypeOpts[e]&&(d.bindTypeOpts[e]={},d.bindTypes.push(e)),d.bindTypeOpts[e].collection=t,d.bindTypeOpts[e].binding=n,d.bindTypeOpts[e].objNameReplaceFn=i},r.addToBoundElems=function(e,t,n){"undefined"==typeof d.boundElems[t]&&(d.boundElems[t]=[]),n.bindType=e,d.boundElems[t].push(n)},r.recollectDOM=function(e){a(e)},r.bind=function(e,t){"undefined"!=typeof d.boundElems[e]&&"object"==typeof t&&s(e,t)},r}(window,document,jQuery,simpleBindUtil,simpleBind||{});simpleBind=function(e,t,n,i,r){var d=r.getState(),l=function(e,t){t.simplebind=t.simplebind.split(".");var n={elem:e,objName:t.simplebind.shift(),objKey:t.simplebind.join("."),opts:t};r.addToBoundElems("simplebind",n.objName,n)},a=function(e,n){var l=i.get(n,e.objKey),a=i.get(d.boundObjectsLast[e.objName],e.objKey);l!=a&&("undefined"!=typeof e.opts.simplefilter&&(l=r.getFilteredValue(l,e.opts.simplefilter)),l="string"==typeof l?l:JSON.stringify(l,null,2),"undefined"!=typeof e.opts.simplebindhtml&&"true"==e.opts.simplebindhtml?e.elem.innerHTML=l:e.elem.childNodes.length?e.elem.childNodes[0].nodeValue=l:e.elem.appendChild(t.createTextNode(l)))},s=new RegExp(/^[^\.]*/),o=function(e,t,n){return 0==e.indexOf(t+".")&&(e=e.replace(s,n)),e};return r.registerBindType("simplebind",l,a,o),r}(window,document,jQuery,simpleBindUtil,simpleBind||{}),simpleBind=function(e,t,n,i,r){var d=r.getState();d.bindHandlers={};var l=function(e,t){for(var n=t.simplebindhandler.split(","),i=0;i<n.length;++i){n[i]=n[i].split(":");var d={elem:e,handler:n[i].shift()};n[i]=n[i].shift().split("."),d.objName=n[i].shift(),d.objKey=n[i].join("."),r.addToBoundElems("simplebindhandler",d.objName,d)}},a=function(e,t){if("undefined"!=typeof d.bindHandlers[e.handler]){var n=i.get(t,e.objKey),r=i.get(d.boundObjectsLast[e.objName],e.objKey);n!=r&&d.bindHandlers[e.handler](e.elem,i.get(t,e.objKey))}},s=function(e,t,n){return e.replace(new RegExp(":"+t+"\\.","g"),":"+n+".")};return r.registerBindType("simplebindhandler",l,a,s),r.registerBindHandler=function(e,t){"function"==typeof t&&(d.bindHandlers[e]=t)},r}(window,document,jQuery,simpleBindUtil,simpleBind||{}),simpleBind=function(e,t,n,i,r){var d=r.getState(),l="data-simplebindvaluechanger",a=function(){var e=this.getAttribute("data-simplebindvalue").split("."),t=e.shift();if(i.set(d.boundObjects[t],e.join("."),o(this)),r.bind(t,d.boundObjects[t]),this.setAttribute(l,"true"),t.indexOf("__repeat")>-1){var n=d.repeatDictionary[t.split("-").shift()];r.bind(n,d.boundObjects[n])}},s=function(e){var t,n=e.tagName.toLowerCase();switch(n){case"input":return t=e.getAttribute("type");default:return n}},o=function(e){var t=s(e);switch(t){case"checkbox":return e.checked;case"type":default:return e.value}},p=function(e,t){switch(t){case"text":n(e).on("keyup",a);break;default:n(e).on("change",a)}},u=function(e,t){t.simplebindvalue=t.simplebindvalue.split(".");var n={elem:e,objName:t.simplebindvalue.shift(),objKey:t.simplebindvalue.join("."),inputType:s(e)};p(e,n.inputType),r.addToBoundElems("simplebindvalue",n.objName,n)},f=function(e,t){var n=i.get(t,e.objKey);switch(e.inputType){case"select":for(var r=e.elem.getElementsByTagName("option"),d=-1,l=0;l<r.length;++l)if(r[l].value==n){d=l;break}e.elem.selectedIndex=l;break;case"radio":e.elem.checked=n==e.elem.value;break;case"checkbox":e.elem.checked=n;break;case"text":default:n!=e.elem.value&&(e.elem.value=n)}},m=new RegExp(/^[^\.]*/),b=function(e,t,n){return 0==e.indexOf(t+".")&&(e=e.replace(m,n)),e};return r.registerBindType("simplebindvalue",u,f,b),r}(window,document,jQuery,simpleBindUtil,simpleBind||{}),simpleBind=function(e,t,n,i,r){var d=r.getState();d.repeatCount=0,d.repeatDictionary={};var l=function(e,t){return"__repeat"+e.repeatIndex+"-"+e.innerObjName+t},a=function(e,t,n){for(var i=0;i<e.length;++i)for(var r=([].concat(d.bindTypes),0);r<d.bindTypes.length;++r){var l="data-"+d.bindTypes[r],a=e[i].getAttribute(l);if(a){var s=d.bindTypeOpts[d.bindTypes[r]].objNameReplaceFn(a,t,n);s!=a&&(e[i].setAttribute(l,s),e[i].removeAttribute("data-simplebindcollected"))}}},s=function(e,n){if(e.repeatedElems.length!=n)if(e.repeatedElems.length<n){for(var i=n-e.repeatedElems.length,s=t.createDocumentFragment(),o=0;i>o;++o){var p=e.repeatTemplate.cloneNode(!0),u=p.getElementsByTagName("*"),f=l(e,0),m=l(e,e.repeatedElems.length);a([p],f,m),a(u,f,m),e.repeatedElems.push(p),s.appendChild(p)}e.elem.appendChild(s),r.recollectDOM(e.elem)}else for(var i=e.repeatedElems.length-n,o=0;i>o;++o){var b=e.repeatedElems.pop(),c=l(e,e.repeatedElems.length);b.parentNode.removeChild(b),"undefined"!=typeof d.boundElems[c]&&delete d.boundElems[c]}},o=function(e,t){t.simplerepeat=t.simplerepeat.split(":");var n=t.simplerepeat.pop().split("."),i={elem:e,objName:n.shift(),objKey:n.join("."),innerObjName:t.simplerepeat.shift(),repeatedElems:[],repeatIndex:d.repeatCount},s=e.getElementsByTagName("*");a(s,i.innerObjName,l(i,0)),i.repeatTemplate=s[0].parentNode.removeChild(s[0]),d.repeatDictionary["__repeat"+i.repeatIndex]=i.objName,++d.repeatCount,r.addToBoundElems("simplerepeat",i.objName,i)},p=function(e,t){var n=i.get(t,e.objKey)||[];if("undefined"!=typeof n.length){s(e,n.length);for(var d=0;d<n.length;++d)r.bind(l(e,d),n[d])}};return r.registerBindType("simplerepeat",o,p),r}(window,document,jQuery,simpleBindUtil,simpleBind||{}),simpleBind=function(e,t,n,i,r){var d=r.getState();d.eventHandlers={};var l=function(e,t){for(var n=t.simpleevent.split(","),r=0;r<n.length;++r){var l=n[r].split(":"),a=l.shift(),s=l.shift(),o=l.length?l.shift().split("."):!1;if(o)var p=o.shift(),u=o.join(".");e.addEventListener(a,function(e){return"undefined"!=typeof d.eventHandlers[s]?o&&"undefined"!=typeof d.boundObjects[p]?void d.eventHandlers[s].call(this,e,i.get(d.boundObjects[p],u)):d.eventHandlers[s].call(this,e,void 0):void 0})}},a=function(e,t,n){e=e.split(",");for(var i=0;i<e.length;++i)e[i]=e[i].split(":"),e[i].length>2&&0==e[i][2].indexOf(t+".")&&(e[i][2]=e[i][2].replace(t,n)),e[i]=e[i].join(":");return e.join(",")};return r.registerBindType("simpleevent",l,null,a),r.registerEvent=function(e,t){d.eventHandlers[e]=t},r}(window,document,jQuery,simpleBindUtil,simpleBind||{}),simpleBind=function(e,t,n,i,r){var d=(r.getState(),function(e,t){for(var n=t.simpledata.split(","),i=0;i<n.length;++i){var d=n[i].split(":"),l=d.shift();d=d.shift().split(".");var a={elem:e,objName:d.shift(),objKey:d.join("."),prop:l};r.addToBoundElems("simpledata",a.objName,a)}}),l=function(e,t){var n="data-"+e.prop.replace(/\W+/g,"-").replace(/([a-z\d])([A-Z])/g,"$1-$2");e.elem.setAttribute(n,i.get(t,e.objKey))},a=function(e,t,n){return e.replace(new RegExp(":"+t+"\\.","g"),":"+n+".")};return r.registerBindType("simpledata",d,l,a),r}(window,document,jQuery,simpleBindUtil,simpleBind||{}),simpleBind=function(e,t,n,i){return state=i.getState(),state.filters={},i.getFilteredValue=function(e,t){t=t.split(",");for(var n=0;n<t.length;++n)"undefined"!=typeof state.filters[t[n]]&&(e=state.filters[t[n]](e));return e},i.registerFilter=function(e,t){"function"==typeof t&&(state.filters[e]=t)},i}(window,document,jQuery,simpleBind||{});