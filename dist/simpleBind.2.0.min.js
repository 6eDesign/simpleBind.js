var simpleBind=function(e){return e}(simpleBind||{});simpleBind.util=function(e,t){var n=function(e){var t=typeof e;switch(t){case"object":return null==e?"null":e instanceof Array?"array":t;default:return t}},i=function(e){for(var i=1,r=e.length;i<r;++i){var d=e[i],a=e[0];for(var l in d){var o="object"!=n(a[l])&&"object"!=n(d[l]);o?a[l]=d[l]:a[l]=t.extend("undefined"==typeof a[l]?{}:a[l],d[l])}}return e.length?e[0]:{}};t.delay=function(){var e=0;return function(t,n){clearTimeout(e),e=setTimeout(t,n)}}(),t.extend=function(){return i(arguments)},t.getKeys=function(e){if(Object.keys)return Object.keys(e);arr=[];for(var t in e)arr.push(t);return arr},t.getData=function(e){var n,i,r={};n=t.getAttrs(e),i=t.getKeys(n);for(var d=0;d<i.length;++d)0===i[d].indexOf("data-")&&(r[i[d].substring(5,i[d].length)]=n[i[d]]);return r},t.getAttrs=function(e){var t,n={};t=e.attributes;for(var i=0;i<t.length;++i){var r=t.item(i);n[r.nodeName]=r.hasOwnProperty("value")?r.value:r.nodeValue}return n},t.set=function(e,t,n){t=t.split(".");for(var i=t.pop();t.length;){var r=t.shift();e[r]="undefined"==typeof e[r]?{}:e[r],e=e[r]}e[i]=n},t.get=function(e,t){if("$base"==t||""===t)return e;t=t.split(".");for(var n=0;n<t.length;++n){if("$base"==t[n])return e;if(null==e)return"";if("undefined"==typeof e[t[n]])return"";if(null===e)return"";e=e[t[n]]}return e};var r=new RegExp(/^[^\.]*/),d=function(e,t,n){return e==t?e=n:0==e.indexOf(t+".")&&(e=e.replace(r,n)),e};return t.replaceObjNameInBindingStr=function(e,t,n,i){if(e.indexOf(":")>-1)switch(t){case"simplerepeat":e=e.split(":"),e[1]=d(e[1],n,i),e=e.join(":");break;case"simpleevent":e=e.split(":"),e.length>=3&&(e[2]=d(e[2],n,i)),e=e.join(":");break;case"simplebindhandler":case"simpledata":case"simplebindattrs":default:e=e.split(",");for(var r=0;r<e.length;++r)e[r]=e[r].split(":"),e[r].length>1&&(e[r][1]=d(e[r][1],n,i)),e[r]=e[r].join(":");e=e.join(",")}else e=d(e,n,i);return e},t.triggerEvent=function(t,n){if("createEvent"in e){var i=e.createEvent("HTMLEvents");i.initEvent(n,!1,!0),t.dispatchEvent(i)}else t.fireEvent("on"+n)},t}(document,{}),simpleBind=function(e,t,n,i){var r={bindTypes:[],bindTypeOpts:{},boundElems:{},boundObjects:{},boundObjectsLast:{},ready:!1,beforeReadyBindQueue:[],autoReBinding:!1,autoReBindingQueue:{}},d=function(){if(a(),r.ready=!0,r.beforeReadyBindQueue.length)for(var e=0;e<r.beforeReadyBindQueue.length;++e)i.bind(r.beforeReadyBindQueue[e].name,r.beforeReadyBindQueue[e].obj)},a=function(e,i){i="undefined"!=typeof i&&i,i&&(r.autoReBinding=!0,r.autoReBindingQueue={}),e="undefined"==typeof e?t:e;for(var d=e.getElementsByTagName("*"),a=0;a<d.length;++a){var l=n.getData(d[a]);if("undefined"==typeof l.simplebindcollected)for(var s=!1,u=0;u<r.bindTypes.length;++u)"undefined"!=typeof l[r.bindTypes[u]]&&(s||(s=!0,d[a].setAttribute("data-simplebindcollected","true")),l.bindType=r.bindTypes[u],r.bindTypeOpts[r.bindTypes[u]].collection(d[a],l))}i&&(r.autoReBinding=!1,o())},l=function(e,t,n){n="undefined"!=typeof n&&n;for(var i=0;i<e.length;++i)r.bindTypeOpts[e[i].bindType].binding&&r.bindTypeOpts[e[i].bindType].binding(e[i],t,n)},o=function(){for(var e in r.autoReBindingQueue)"undefined"!=typeof r.boundObjects[e]&&l(r.autoReBindingQueue[e],r.boundObjects[e],!0)},s=function(e,t){"undefined"==typeof r.boundObjectsLast[e]&&(r.boundObjectsLast[e]={}),r.boundObjects[e]=t,"undefined"!=typeof r.boundElems[e]&&(l(r.boundElems[e],t),r.boundObjectsLast[e]=n.extend({},t))};return t.addEventListener("DOMContentLoaded",function(){d()}),i.getState=function(){return r},i.registerBindType=function(e,t,n){"undefined"==typeof r.bindTypeOpts[e]&&(r.bindTypeOpts[e]={},r.bindTypes.push(e)),r.bindTypeOpts[e].collection=t,r.bindTypeOpts[e].binding=n},i.addToBoundElems=function(e,t,n){n.bindType=e,"undefined"==typeof r.boundElems[t]&&(r.boundElems[t]=[]),r.autoReBinding&&("undefined"==typeof r.autoReBindingQueue[t]&&(r.autoReBindingQueue[t]=[]),r.autoReBindingQueue[t].push(n)),r.boundElems[t].push(n)},i.recollectDOM=function(e,t){a(e,t)},i.bind=function(e,t){"string"==typeof e&&"object"==typeof t&&("undefined"==typeof r.boundElems[e]&&(r.boundElems[e]=[]),r.ready?s(e,t):r.beforeReadyBindQueue.push({name:e,obj:t}))},i}(window,document,simpleBind.util,simpleBind||{}),simpleBind=function(e,t,n,i){var r=i.getState(),d=function(e,t){t.simplebind=t.simplebind.split(".");var n={elem:e,objName:t.simplebind.shift(),objKey:t.simplebind.join("."),opts:t};i.addToBoundElems("simplebind",n.objName,n)},a=function(e,d,a){var l=n.get(d,e.objKey),o=n.get(r.boundObjectsLast[e.objName],e.objKey);(l!==o||a)&&("undefined"!=typeof e.opts.simplefilter&&(l=i.getFilteredValue(l,e.opts.simplefilter)),l="string"==typeof l?l:JSON.stringify(l,null,2),"undefined"!=typeof e.opts.simplebindhtml&&"true"==e.opts.simplebindhtml?e.elem.innerHTML=l:e.elem.childNodes.length?e.elem.childNodes[0].nodeValue=l:e.elem.appendChild(t.createTextNode(l)))};return i.registerBindType("simplebind",d,a),i}(window,document,simpleBind.util,simpleBind||{}),simpleBind=function(e,t,n,i){var r=i.getState();r.bindHandlers={};var d=function(e,t){for(var n=t.simplebindhandler.split(","),r=0;r<n.length;++r){n[r]=n[r].split(":");var d={elem:e,handler:n[r].shift()};n[r]=n[r].shift().split("."),d.objName=n[r].shift(),d.objKey=n[r].join("."),i.addToBoundElems("simplebindhandler",d.objName,d)}},a=function(e,t,i){if("undefined"!=typeof r.bindHandlers[e.handler]){var d=n.get(t,e.objKey),a=n.get(r.boundObjectsLast[e.objName],e.objKey),l="object"==typeof d?JSON.stringify(d)!=JSON.stringify(a):d!=a;(l||i)&&r.bindHandlers[e.handler](e.elem,n.get(t,e.objKey),e.objName)}};return i.registerBindType("simplebindhandler",d,a),i.registerBindHandler=function(e,t){"function"==typeof t&&(r.bindHandlers[e]=t)},i}(window,document,simpleBind.util,simpleBind||{}),simpleBind=function(e,t,n,i){var r=i.getState(),d="data-simpleeventdispatch",a="data-simplebindvaluechanger",l=function(){if(this.getAttribute(d))this.removeAttribute(d);else{var e=this.getAttribute("data-simplebindvalue").split("."),t=e.shift();if("undefined"==typeof r.boundObjects[t]&&(r.boundObjects[t]={}),n.set(r.boundObjects[t],e.join("."),p(this)),i.bind(t,r.boundObjects[t]),this.setAttribute(a,"true"),t.indexOf("__repeat")>-1){var l=r.repeatDictionary[t.split("-").shift()];i.bind(l,r.boundObjects[l])}}},o=function(){var e=this;n.delay(function(){l.call(e)},50)},s=function(e){var t,n=e.tagName.toLowerCase();switch(n){case"input":return t=e.getAttribute("type");default:return n}},u=function(e,t){var n=s(e);switch(n){case"checkbox":return String(e.checked)!=String(t);case"radio":var i=p(e);return e.checked&&i!=String(t)||!e.checked&&i==String(t);default:return t!=p(e)}},p=function(e){var t=s(e);switch(t){case"checkbox":return e.checked;default:return e.value}},f=function(e,t){switch(t){case"text":case"tel":case"password":case"textarea":case"zip":e.addEventListener("keyup",o);default:e.addEventListener("change",l)}},b=function(e,t){switch(e.inputType){case"select":for(var n=e.elem.getElementsByTagName("option"),i=0,r=0;r<n.length;++r)if(n[r].value==t){i=r;break}e.elem.selectedIndex=i;break;case"radio":e.elem.checked=String(t)==e.elem.value;break;case"checkbox":e.elem.checked=t===!0||"true"==t;break;case"textarea":e.elem.innerHTML!=t&&(e.elem.innerHTML=t);break;case"text":default:(t!=e.elem.value||flush)&&(e.elem.value=t)}},c=function(e,t){t.simplebindvalue=t.simplebindvalue.split(".");var n={elem:e,objName:t.simplebindvalue.shift(),objKey:t.simplebindvalue.join("."),inputType:s(e),initiatedChange:!1};f(e,n.inputType),i.addToBoundElems("simplebindvalue",n.objName,n)},m=function(e,t,i){var r=n.get(t,e.objKey);u(e.elem,r)?e.elem.getAttribute(a)?e.elem.removeAttribute(a):(b(e,r),e.elem.setAttribute(d,"true"),n.triggerEvent(e.elem,"change")):e.elem.getAttribute(a)&&e.elem.removeAttribute(a)};return i.registerBindType("simplebindvalue",c,m),i}(window,document,simpleBind.util,simpleBind||{}),simpleBind=function(e,t,n,i){var r=i.getState();r.repeatCount=0,r.repeatDictionary={};var d=function(e,t){return"__repeat"+e.repeatIndex+"-"+e.innerObjName+t},a=function(e,t,i){for(var d=0;d<e.length;++d)for(var a=0;a<r.bindTypes.length;++a){var l="data-"+r.bindTypes[a],o=e[d].getAttribute(l);if(o){var s=n.replaceObjNameInBindingStr(o,r.bindTypes[a],t,i);s!=o?(e[d].setAttribute(l,s),e[d].removeAttribute("data-simplebindcollected")):e[d].removeAttribute("data-simplebindcollected")}}},l=function(e,n){if(e.repeatedElems.length!=n){var l;if(e.repeatedElems.length<n){l=n-e.repeatedElems.length;for(var o=t.createDocumentFragment(),s=0;s<l;++s){var u=e.repeatTemplate.cloneNode(!0),p=u.getElementsByTagName("*"),f=d(e,0),b=d(e,e.repeatedElems.length);a([u],f,b),a(p,f,b),e.repeatedElems.push(u),o.appendChild(u)}e.elem.appendChild(o),i.recollectDOM(e.elem,!0)}else{l=e.repeatedElems.length-n;for(var s=0;s<l;++s){var c=e.repeatedElems.pop(),m=d(e,e.repeatedElems.length);c.parentNode.removeChild(c),"undefined"!=typeof r.boundElems[m]&&delete r.boundElems[m],"undefined"!=typeof r.boundObjects[m]&&delete r.boundObjects[m],"undefined"!=typeof r.boundObjectsLast[m]&&delete r.boundObjectsLast[m]}}}},o=function(e,t){t.simplerepeat=t.simplerepeat.split(":");var n=t.simplerepeat.pop().split("."),l={elem:e,objName:n.shift(),objKey:n.join("."),innerObjName:t.simplerepeat.shift(),repeatedElems:[],repeatIndex:r.repeatCount},o=e.getElementsByTagName("*");a(o,l.innerObjName,d(l,0)),l.repeatTemplate=o[0].parentNode.removeChild(o[0]),r.repeatDictionary["__repeat"+l.repeatIndex]=l.objName,++r.repeatCount,i.addToBoundElems("simplerepeat",l.objName,l)},s=function(e,t,r){var a=n.get(t,e.objKey)||[];if("undefined"!=typeof a.length){l(e,a.length);for(var o=0;o<a.length;++o)i.bind(d(e,o),a[o])}};return i.registerBindType("simplerepeat",o,s),i.rewriteBindings=function(e,t,n){a(e,t,n)},i}(window,document,simpleBind.util,simpleBind||{}),simpleBind=function(e,t,n,i){var r=i.getState();r.eventHandlers={};var d=function(e,t,i,d,a,l){e.addEventListener(t,function(e){if("undefined"!=typeof r.eventHandlers[i])return d&&"undefined"!=typeof r.boundObjects[a]?void r.eventHandlers[i].call(this,e,n.get(r.boundObjects[a],l)):r.eventHandlers[i].call(this,e,void 0)})},a=function(e,t){for(var n=t.simpleevent.split(","),i=0;i<n.length;++i){var r=n[i].split(":"),a=r.shift(),l=r.shift(),o=!!r.length&&r.shift().split(".");if(o){var s=o.shift(),u=o.join(".");d(e,a,l,o,s,u)}else d(e,a,l,o)}};return i.registerBindType("simpleevent",a,null),i.registerEvent=function(e,t){r.eventHandlers[e]=t},i}(window,document,simpleBind.util,simpleBind||{}),simpleBind=function(e,t,n,i){var r=simpleBind.getState(),d=function(e,t){for(var n=t.simplebindattrs.split(","),r=0;r<n.length;++r){n[r]=n[r].split(":");var d={elem:e,attr:n[r].shift()};n[r]=n[r].shift().split("."),d.objName=n[r].shift(),d.objKey=n[r].join("."),i.addToBoundElems("simplebindattrs",d.objName,d)}},a=function(e,t,i){var d=n.get(t,e.objKey),a=n.get(r.boundObjectsLast[e.objName],e.objKey);(d!=a||i)&&e.elem.setAttribute(e.attr,d)};return i.registerBindType("simplebindattrs",d,a),i}(window,document,simpleBind.util,simpleBind||{}),simpleBind=function(e,t,n,i){var r=(i.getState(),function(e,t){for(var n=t.simpledata.split(","),r=0;r<n.length;++r){var d=n[r].split(":"),a=d.shift();d=d.shift().split(".");var l={elem:e,objName:d.shift(),objKey:d.join("."),prop:a};i.addToBoundElems("simpledata",l.objName,l)}}),d=function(e,t){var i="data-"+e.prop.replace(/\W+/g,"-").replace(/([a-z\d])([A-Z])/g,"$1-$2");e.elem.setAttribute(i,n.get(t,e.objKey))};return i.registerBindType("simpledata",r,d),i}(window,document,simpleBind.util,simpleBind||{}),simpleBind=function(e,t,n){var i=n.getState();return i.filters={},n.getFilteredValue=function(e,t){t=t.split(",");for(var n=0;n<t.length;++n)"undefined"!=typeof i.filters[t[n]]&&(e=i.filters[t[n]](e));return e},n.registerFilter=function(e,t){"function"==typeof t&&(i.filters[e]=t)},n}(window,document,simpleBind||{});