var simpleBindUtil=function(e){var t=function(t,n){return"object"==typeof t&&"object"==typeof n?e.extend(n,t):t};e.delay=function(){var e=0;return function(t,n){clearTimeout(e),e=setTimeout(t,n)}}(),e.extend=function(){for(var e=arguments.length;e>0;--e)for(var n in arguments[e])arguments[e-1][n]=t(arguments[e][n],arguments[e-1][n]);return arguments[0]},e.getKeys=function(e){if(Object.keys)return Object.keys(e);arr=[];for(var t in e)arr.push(t);return arr},e.getData=function(t){var n,i,d={};n=e.getAttrs(t),i=e.getKeys(n);for(var r=0;r<i.length;++r)0===i[r].indexOf("data-")&&(d[i[r].substring(5,i[r].length)]=n[i[r]]);return d},e.getAttrs=function(e){var t,n={};t=e.attributes;for(var i=0;i<t.length;++i){var d=t.item(i);n[d.nodeName]=d.hasOwnProperty("value")?d.value:d.nodeValue}return n},e.set=function(e,t,n){t=t.split(".");for(var i=t.pop();t.length;){var d=t.shift();e[d]="undefined"==typeof e[d]?{}:e[d],e=e[d]}e[i]=n},e.get=function(e,t){if("$base"==t||""===t)return e;t=t.split(".");for(var n=0;n<t.length;++n){if("$base"==t[n])return e;if(null==e)return"";if("undefined"==typeof e[t[n]])return"";if(null===e)return"";e=e[t[n]]}return e};var n=new RegExp(/^[^\.]*/),i=function(e,t,i){return e==t?e=i:0==e.indexOf(t+".")&&(e=e.replace(n,i)),e};return e.replaceObjNameInBindingStr=function(e,t,n,d){if(e.indexOf(":")>-1)switch(t){case"simplerepeat":e=e.split(":"),e[1]=i(e[1],n,d),e=e.join(":");break;case"simpleevent":e=e.split(":"),e.length>=3&&(e[2]=i(e[2],n,d)),e=e.join(":");break;case"simplebindhandler":case"simpledata":case"simplebindattrs":default:e=e.split(",");for(var r=0;r<e.length;++r)e[r]=e[r].split(":"),e[r].length>1&&(e[r][1]=i(e[r][1],n,d)),e[r]=e[r].join(":");e=e.join(",")}else e=i(e,n,d);return e},e}({}),simpleBind=function(e,t,n,i){var d={bindTypes:[],bindTypeOpts:{},boundElems:{},boundObjects:{},boundObjectsLast:{},ready:!1,beforeReadyBindQueue:[],autoReBinding:!1,autoReBindingQueue:{}},r=function(){if(a(),d.ready=!0,d.beforeReadyBindQueue.length)for(var e=0;e<d.beforeReadyBindQueue.length;++e)i.bind(d.beforeReadyBindQueue[e].name,d.beforeReadyBindQueue[e].obj)},a=function(e,i){i="undefined"==typeof i?!1:i,i&&(d.autoReBinding=!0,d.autoReBindingQueue={}),e="undefined"==typeof e?t:e;for(var r=e.getElementsByTagName("*"),a=0;a<r.length;++a){var o=n.getData(r[a]);if("undefined"==typeof o.simplebindcollected)for(var l=!1,u=0;u<d.bindTypes.length;++u)"undefined"!=typeof o[d.bindTypes[u]]&&(l||(l=!0,r[a].setAttribute("data-simplebindcollected","true")),o.bindType=d.bindTypes[u],d.bindTypeOpts[d.bindTypes[u]].collection(r[a],o))}i&&(d.autoReBinding=!1,s())},o=function(e,t,n){n="undefined"==typeof n?!1:n;for(var i=0;i<e.length;++i)d.bindTypeOpts[e[i].bindType].binding&&d.bindTypeOpts[e[i].bindType].binding(e[i],t,n)},s=function(){for(var e in d.autoReBindingQueue)"undefined"!=typeof d.boundObjects[e]&&o(d.autoReBindingQueue[e],d.boundObjects[e],!0)},l=function(e,t){"undefined"==typeof d.boundObjectsLast[e]&&(d.boundObjectsLast[e]={}),d.boundObjects[e]=t,"undefined"!=typeof d.boundElems[e]&&(o(d.boundElems[e],t),d.boundObjectsLast[e]=n.extend({},t))};return t.addEventListener("DOMContentLoaded",function(){r()}),i.getState=function(){return d},i.registerBindType=function(e,t,n){"undefined"==typeof d.bindTypeOpts[e]&&(d.bindTypeOpts[e]={},d.bindTypes.push(e)),d.bindTypeOpts[e].collection=t,d.bindTypeOpts[e].binding=n},i.addToBoundElems=function(e,t,n){n.bindType=e,"undefined"==typeof d.boundElems[t]&&(d.boundElems[t]=[]),d.autoReBinding&&("undefined"==typeof d.autoReBindingQueue[t]&&(d.autoReBindingQueue[t]=[]),d.autoReBindingQueue[t].push(n)),d.boundElems[t].push(n)},i.recollectDOM=function(e,t){a(e,t)},i.bind=function(e,t){"string"==typeof e&&"object"==typeof t&&("undefined"==typeof d.boundElems[e]&&(d.boundElems[e]=[]),d.ready?l(e,t):d.beforeReadyBindQueue.push({name:e,obj:t}))},i}(window,document,simpleBindUtil,simpleBind||{});simpleBind=function(e,t,n,i){var d=i.getState(),r=function(e,t){t.simplebind=t.simplebind.split(".");var n={elem:e,objName:t.simplebind.shift(),objKey:t.simplebind.join("."),opts:t};i.addToBoundElems("simplebind",n.objName,n)},a=function(e,r,a){var o=n.get(r,e.objKey),s=n.get(d.boundObjectsLast[e.objName],e.objKey);(o!==s||a)&&("undefined"!=typeof e.opts.simplefilter&&(o=i.getFilteredValue(o,e.opts.simplefilter)),o="string"==typeof o?o:JSON.stringify(o,null,2),"undefined"!=typeof e.opts.simplebindhtml&&"true"==e.opts.simplebindhtml?e.elem.innerHTML=o:e.elem.childNodes.length?e.elem.childNodes[0].nodeValue=o:e.elem.appendChild(t.createTextNode(o)))};return i.registerBindType("simplebind",r,a),i}(window,document,simpleBindUtil,simpleBind||{}),simpleBind=function(e,t,n,i){var d=i.getState();d.bindHandlers={};var r=function(e,t){for(var n=t.simplebindhandler.split(","),d=0;d<n.length;++d){n[d]=n[d].split(":");var r={elem:e,handler:n[d].shift()};n[d]=n[d].shift().split("."),r.objName=n[d].shift(),r.objKey=n[d].join("."),i.addToBoundElems("simplebindhandler",r.objName,r)}},a=function(e,t,i){if("undefined"!=typeof d.bindHandlers[e.handler]){var r=n.get(t,e.objKey),a=n.get(d.boundObjectsLast[e.objName],e.objKey);(r!=a||i)&&d.bindHandlers[e.handler](e.elem,n.get(t,e.objKey))}};return i.registerBindType("simplebindhandler",r,a),i.registerBindHandler=function(e,t){"function"==typeof t&&(d.bindHandlers[e]=t)},i}(window,document,simpleBindUtil,simpleBind||{}),simpleBind=function(e,t,n,i){var d=i.getState(),r="data-simplebindvaluechanger",a=function(){var e=this.getAttribute("data-simplebindvalue").split("."),t=e.shift();if("undefined"==typeof d.boundObjects[t]&&(d.boundObjects[t]={}),n.set(d.boundObjects[t],e.join("."),l(this)),i.bind(t,d.boundObjects[t]),this.setAttribute(r,"true"),t.indexOf("__repeat")>-1){var a=d.repeatDictionary[t.split("-").shift()];i.bind(a,d.boundObjects[a])}},o=function(){var e=this;n.delay(function(){a.call(e)},50)},s=function(e){var t,n=e.tagName.toLowerCase();switch(n){case"input":return t=e.getAttribute("type");default:return n}},l=function(e){var t=s(e);switch(t){case"textarea":return e.innerHTML;case"checkbox":return e.checked;default:return e.value}},u=function(e,t){switch(t){case"text":case"password":case"textarea":e.addEventListener("keyup",o);default:e.addEventListener("change",a)}},p=function(e,t){t.simplebindvalue=t.simplebindvalue.split(".");var n={elem:e,objName:t.simplebindvalue.shift(),objKey:t.simplebindvalue.join("."),inputType:s(e)};u(e,n.inputType),i.addToBoundElems("simplebindvalue",n.objName,n)},f=function(e,t,i){var d=n.get(t,e.objKey);switch(e.inputType){case"select":for(var r=e.elem.getElementsByTagName("option"),a=-1,o=0;o<r.length;++o)if(r[o].value==d){a=o;break}e.elem.selectedIndex=a;break;case"radio":e.elem.checked=d==e.elem.value;break;case"checkbox":e.elem.checked=d;break;case"textarea":e.elem.innerHTML!=d&&(e.elem.innerHTML=d);break;case"text":default:(d!=e.elem.value||i)&&(e.elem.value=d)}};return i.registerBindType("simplebindvalue",p,f),i}(window,document,simpleBindUtil,simpleBind||{}),simpleBind=function(e,t,n,i){var d=i.getState();d.repeatCount=0,d.repeatDictionary={};var r=function(e,t){return"__repeat"+e.repeatIndex+"-"+e.innerObjName+t},a=function(e,t,i){for(var r=0;r<e.length;++r)for(var a=0;a<d.bindTypes.length;++a){var o="data-"+d.bindTypes[a],s=e[r].getAttribute(o);if(s){var l=n.replaceObjNameInBindingStr(s,d.bindTypes[a],t,i);l!=s?(e[r].setAttribute(o,l),e[r].removeAttribute("data-simplebindcollected")):e[r].removeAttribute("data-simplebindcollected")}}},o=function(e,n){if(e.repeatedElems.length!=n){var o;if(e.repeatedElems.length<n){o=n-e.repeatedElems.length;for(var s=t.createDocumentFragment(),l=0;o>l;++l){var u=e.repeatTemplate.cloneNode(!0),p=u.getElementsByTagName("*"),f=r(e,0),b=r(e,e.repeatedElems.length);a([u],f,b),a(p,f,b),e.repeatedElems.push(u),s.appendChild(u)}e.elem.appendChild(s),i.recollectDOM(e.elem,!0)}else{o=e.repeatedElems.length-n;for(var l=0;o>l;++l){var m=e.repeatedElems.pop(),c=r(e,e.repeatedElems.length);m.parentNode.removeChild(m),"undefined"!=typeof d.boundElems[c]&&delete d.boundElems[c],"undefined"!=typeof d.boundObjects[c]&&delete d.boundObjects[c],"undefined"!=typeof d.boundObjectsLast[c]&&delete d.boundObjectsLast[c]}}}},s=function(e,t){t.simplerepeat=t.simplerepeat.split(":");var n=t.simplerepeat.pop().split("."),o={elem:e,objName:n.shift(),objKey:n.join("."),innerObjName:t.simplerepeat.shift(),repeatedElems:[],repeatIndex:d.repeatCount},s=e.getElementsByTagName("*");a(s,o.innerObjName,r(o,0)),o.repeatTemplate=s[0].parentNode.removeChild(s[0]),d.repeatDictionary["__repeat"+o.repeatIndex]=o.objName,++d.repeatCount,i.addToBoundElems("simplerepeat",o.objName,o)},l=function(e,t){var d=n.get(t,e.objKey)||[];if("undefined"!=typeof d.length){o(e,d.length);for(var a=0;a<d.length;++a)i.bind(r(e,a),d[a])}};return i.registerBindType("simplerepeat",s,l),i}(window,document,simpleBindUtil,simpleBind||{}),simpleBind=function(e,t,n,i){var d=i.getState();d.eventHandlers={};var r=function(e,t){for(var i=t.simpleevent.split(","),r=0;r<i.length;++r){var a=i[r].split(":"),o=a.shift(),s=a.shift(),l=a.length?a.shift().split("."):!1;if(l)var u=l.shift(),p=l.join(".");e.addEventListener(o,function(e){return"undefined"!=typeof d.eventHandlers[s]?l&&"undefined"!=typeof d.boundObjects[u]?void d.eventHandlers[s].call(this,e,n.get(d.boundObjects[u],p)):d.eventHandlers[s].call(this,e,void 0):void 0})}};return i.registerBindType("simpleevent",r,null),i.registerEvent=function(e,t){d.eventHandlers[e]=t},i}(window,document,simpleBindUtil,simpleBind||{}),simpleBind=function(e,t,n,i){var d=simpleBind.getState(),r=function(e,t){for(var n=t.simplebindattrs.split(","),d=0;d<n.length;++d){n[d]=n[d].split(":");var r={elem:e,attr:n[d].shift()};n[d]=n[d].shift().split("."),r.objName=n[d].shift(),r.objKey=n[d].join("."),i.addToBoundElems("simplebindattrs",r.objName,r)}},a=function(e,t,i){var r=n.get(t,e.objKey),a=n.get(d.boundObjectsLast[e.objName],e.objKey);(r!=a||i)&&e.elem.setAttribute(e.attr,r)};return i.registerBindType("simplebindattrs",r,a),i}(window,document,simpleBindUtil,simpleBind||{}),simpleBind=function(e,t,n,i){var d=(i.getState(),function(e,t){for(var n=t.simpledata.split(","),d=0;d<n.length;++d){var r=n[d].split(":"),a=r.shift();r=r.shift().split(".");var o={elem:e,objName:r.shift(),objKey:r.join("."),prop:a};i.addToBoundElems("simpledata",o.objName,o)}}),r=function(e,t){var i="data-"+e.prop.replace(/\W+/g,"-").replace(/([a-z\d])([A-Z])/g,"$1-$2");e.elem.setAttribute(i,n.get(t,e.objKey))};return i.registerBindType("simpledata",d,r),i}(window,document,simpleBindUtil,simpleBind||{}),simpleBind=function(e,t,n){var i=n.getState();return i.filters={},n.getFilteredValue=function(e,t){t=t.split(",");for(var n=0;n<t.length;++n)"undefined"!=typeof i.filters[t[n]]&&(e=i.filters[t[n]](e));return e},n.registerFilter=function(e,t){"function"==typeof t&&(i.filters[e]=t)},n}(window,document,simpleBind||{});