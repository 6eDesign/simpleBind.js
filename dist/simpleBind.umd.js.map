{"version":3,"file":"simpleBind.umd.js","sources":["../src/bindTypes/const/objNameLocation.js","../src/simpleBindUtil.js","../src/state.js","../src/simpleBind.js","../src/bindTypes/simplebind.js","../src/bindTypes/simplebindhandler.js","../src/bindTypes/simplebindvalue.js","../src/bindTypes/simplerepeat.js","../src/bindTypes/simpleevent.js","../src/bindTypes/simplebindattrs.js","../src/bindTypes/simpledata.js","../src/bindAugmenters/filters.js"],"sourcesContent":["export const FIRST_IN_STRING = 'FIRST_IN_STRING';\nexport const COLON_SEPARATED_SECOND_GROUP = 'COLON_SEPARATED_SECOND_GROUP';\nexport const COLON_SEPARATED_THIRD_GROUP = 'COLON_SEPARATED_THIRD_GROUP';","import * as objNameLocations from './bindTypes/const/objNameLocation';\n\nvar getType = function(variable) {\n  var type = typeof variable;\n  switch(type) {\n    case 'object':\n      if(variable == null) return 'null';\n      return variable instanceof Array ? 'array' : type;\n    default:\n      return type;\n  }\n};\n\nexport var delay = (function(){\n  var timer = 0;\n  return function(callback, ms){\n    clearTimeout (timer);\n    timer = setTimeout(callback, ms);\n  };\n})();\n\nvar copyArrayWithoutReferences = function (arr) {\n  var toReturn = [];\n  for (var i = 0; i < arr.length; ++i) {\n    var type = getType(arr[i]);\n    switch (type) {\n      case 'object':\n        toReturn.push(extend({}, arr[i]));\n        break;\n      case 'array':\n        toReturn.push(copyArrayWithoutReferences(arr[i]));\n        break;\n      default:\n        toReturn.push(arr[i]);\n        break;\n    }\n  }\n  return toReturn;\n};\n\nexport var extend = function() {\n  for (var i = 1, len = arguments.length; i < len; ++i) {\n    var src = arguments[i]\n      , target = arguments[0];\n    for (var key in src) {\n      var isArrayPresent = getType(src[key]) === 'array';\n      var simpleExtend = getType(target[key]) != 'object' && getType(src[key]) != 'object' && !isArrayPresent;\n      if (simpleExtend) {\n        target[key] = src[key];\n      } else {\n        target[key] = extend(typeof target[key] == 'undefined' ? { } : target[key],src[key]);\n        if (isArrayPresent) {\n          target[key] = copyArrayWithoutReferences(src[key]);\n        } else {\n          target[key] = extend(typeof target[key] == 'undefined' ? {} : target[key], src[key]);\n        }\n      }\n    }\n  }\n  return arguments.length ? arguments[0] : { };\n};\n\nexport var getKeys = function(obj) {\n  if(Object.keys) {\n    return Object.keys(obj);\n  } else {\n    arr = [];\n    for(var key in obj) {\n      arr.push(key);\n    }\n    return arr;\n  }\n};\n\nexport var getData = function(elem) {\n  var attrs, keys, data = { };\n  attrs = getAttrs(elem);\n  keys = getKeys(attrs);\n  for(var i=0; i < keys.length; ++i) {\n    if(keys[i].indexOf('data-') === 0) {\n      data[keys[i].substring(5,keys[i].length)] = attrs[keys[i]];\n    }\n  }\n  return data;\n};\n\nexport var getAttrs = function(elem) {\n  var attrs, obj = {};\n  attrs = elem.attributes;\n  for(var i=0; i < attrs.length; ++i) {\n    var attr = attrs.item(i);\n    obj[attr.nodeName] = (attr.hasOwnProperty('value')) ? attr.value : attr.nodeValue;\n  }\n  return obj;\n};\n\n// A great function for setting object values\n// via a string with dot notation:\n// ex) set({x:{y:{z:2}}},'y.z',3)\n\n// set = function(obj,str,val) {\n//   str = str.split('.');\n//   while(str.length > 1) {\n//     obj = obj[str.shift()];\n//   }\n//   obj[str.shift()] = val;\n// };\n\n// let's modify this function to be able to\n// build an object so we could have SEO friendly\n// binds and so that people don't have to rush\n// to bind their objects immediately\nexport var set = function(obj,str,val) {\n  str = str.split('.');\n  var finalProp = str.pop();\n  while(str.length) {\n    var key = str.shift();\n    obj[key] = typeof obj[key] == 'undefined' ? { } : obj[key];\n    obj = obj[key];\n  }\n  obj[finalProp] = val;\n};\n\n// Same as above but retrieves the value as a string or as an empty string\n// if not set:\nexport var get = function(obj,str) {\n  if(str == '$base' || str === '') return obj;\n  str = str.split('.');\n  for(var i=0; i < str.length; ++i) {\n    if(str[i] == '$base') {\n      return obj;\n    } else if(obj == null) {\n      return '';\n    } else if(typeof obj[str[i]] == 'undefined') {\n      return '';\n    } else {\n      if(obj === null) {\n        return '';\n      } else {\n        obj = obj[str[i]];\n      }\n    }\n  }\n  return obj;\n};\n\nlet replaceObjNameInBindingStrSingular = (location,oldName,newName) => str => { \n  switch(location) { \n    case objNameLocations.FIRST_IN_STRING: \n      str = str.replace(new RegExp(`^${oldName}(\\.)?`), `${newName}$1`);\n      return str; \n    case objNameLocations.COLON_SEPARATED_SECOND_GROUP: \n      str = str.replace(new RegExp(`^([^:]+:)${oldName}(\\\\.)?`),`$1${newName}$2`);\n      return str; \n    case objNameLocations.COLON_SEPARATED_THIRD_GROUP: \n      str = str.replace(new RegExp(`^([^:]+:[^:]+:)${oldName}(\\\\.)?`),`$1${newName}$2`);\n      return str; \n  }\n};\n\nexport function replaceObjNameInBindingStr(str,bindTypeOpts,oldName,newName) { \n  return str.split(',')\n            .map(replaceObjNameInBindingStrSingular(bindTypeOpts.objNameLocation,oldName,newName))\n            .join(','); \n}\n\nexport var triggerEvent = function(elem,type){\n  if('createEvent' in document) {\n    var evt = document.createEvent('HTMLEvents');\n    evt.initEvent(type,false,true);\n    elem.dispatchEvent(evt);\n  } else {\n    elem.fireEvent('on' + type);\n  }\n};","export default { \n  bindTypes: [ ], \n  bindTypeOpts: { }, \n  boundElems: { }, \n  boundObjects: { }, \n  boundObjectsLast: { }, \n  ready: false,\n  beforeReadyBindQueue: [ ], \n  autoReBinding: false, \n  autoReBindingQueue: { }, \n  isBindDueToDevTools: false\n};","import * as util from './simpleBindUtil';\nimport state from './state';\n\nconst useDevTools = typeof window.__REDUX_DEVTOOLS_EXTENSION__ != 'undefined'; \n\nif(useDevTools) { \n  const devTools = window.__REDUX_DEVTOOLS_EXTENSION__.connect({latency: 0});\n  devTools.subscribe((message,...args) => {\n    if (message.type === 'DISPATCH' && message.state) {\n      // console.log(args,'DevTools requested to change the state to', message.state);\n      let newState = JSON.parse(message.state); \n      for(var key in newState) {\n        state.isBindDueToDevTools = true;\n        lib.bind(key,newState[key]);\n      }\n    }\n  });\n}\n\n\nvar d = document;\n\nvar init = function() { \n  domCollection();\n  state.ready = true; \n  if(state.beforeReadyBindQueue.length) { \n    for(var i=0; i < state.beforeReadyBindQueue.length; ++i) { \n      lib.bind(state.beforeReadyBindQueue[i].name,state.beforeReadyBindQueue[i].obj);\n    }\n  }\n}; \n\nvar domCollection = function(base,autoReBind=false) { \n  if(autoReBind) { \n    state.autoReBinding = true; \n    state.autoReBindingQueue = { }; \n  } \n  base = (typeof base == 'undefined') ? d : base;\n  var all = base.getElementsByTagName('*');\n  for(var i=0; i < all.length; ++i) {\n    var opts = util.getData(all[i]);\n    if(typeof opts['simplebindcollected'] == 'undefined') { \n      var foundBinding = false; \n      for(var j=0; j < state.bindTypes.length; ++j) { \n        if(typeof opts[state.bindTypes[j]] != 'undefined') { \n          if(!foundBinding) { \n            foundBinding = true;  \n            all[i].setAttribute('data-simplebindcollected','true'); \n          }\n          opts.bindType = state.bindTypes[j]; \n          state.bindTypeOpts[state.bindTypes[j]].collection(all[i],opts); \n        }\n      }\n    }\n  }\n  if(autoReBind) { \n    state.autoReBinding = false; \n    processAutoRebindingQueue(); \n  } \n}; \n\nvar processBoundElems = function(elems,obj,flush) { \n  flush = typeof flush == 'undefined' ? false : flush;\n  for(var i=0; i < elems.length; ++i) { \n    if(state.bindTypeOpts[elems[i].bindType].binding) { \n      state.bindTypeOpts[elems[i].bindType].binding(elems[i],obj,flush); \n    }\n  }\n}; \n\nvar processAutoRebindingQueue = function() { \n  for(var key in state.autoReBindingQueue) { \n    if(typeof state.boundObjects[key] != 'undefined') { \n      processBoundElems(state.autoReBindingQueue[key],state.boundObjects[key],true);\n    }\n  }\n}; \n\nvar processBindings = function(objName,obj) { \n  if(typeof state.boundObjectsLast[objName] == 'undefined') state.boundObjectsLast[objName] = { }; \n  state.boundObjects[objName] = obj; \n  if(typeof state.boundElems[objName] != 'undefined') { \n    processBoundElems(state.boundElems[objName],obj); \n    state.boundObjectsLast[objName] = util.extend({},obj);\n  }\n}; \n\nd.addEventListener('DOMContentLoaded',function(){\n  init();\n}); \n\nvar lib = window.simpleBind || {}; \n\nlib.util = util;\n\nlib.getState = function() { \n  return state;\n}; \n\nlet defaultBindTypeOpts = { \n  binding: null\n}; \n\nlib.registerBindType = function(selector,opts) { \n  if(typeof state.bindTypeOpts[selector] == 'undefined') { \n    state.bindTypeOpts[selector] = { }; \n    state.bindTypes.push(selector); \n  }\n  util.extend(state.bindTypeOpts[selector],defaultBindTypeOpts,opts);\n}; \n\nlib.addToBoundElems = function(bindType,objName,configObj) { \n  configObj.bindType = bindType; \n  if(typeof state.boundElems[objName] == 'undefined') state.boundElems[objName] = []; \n  if(state.autoReBinding) { \n    if(typeof state.autoReBindingQueue[objName] == 'undefined') state.autoReBindingQueue[objName] = []; \n    state.autoReBindingQueue[objName].push(configObj);      \n  }\n  state.boundElems[objName].push(configObj); \n}; \n\nlib.recollectDOM = function(context,autoReBind) { \n  domCollection(context,autoReBind);\n}; \n\nlet isARepeatKey = name => name.indexOf('__repeat') == 0;\n\nlet removeRepeatsFromState = obj => { \n  let newObj = util.extend({},state.boundObjects); \n  Object.keys(newObj).filter(isARepeatKey).forEach(k => delete newObj[k]);\n  return newObj;\n}; \n\nlib.bind = function(objName,obj) {\n  if(typeof objName == 'string' && typeof obj != 'undefined') {\n    if(typeof state.boundElems[objName] == 'undefined') state.boundElems[objName] = [];\n    if(state.ready) { \n      var eligibleForDevTools = state.isBindDueToDevTools == false; \n      if(state.isBindDueToDevTools) state.isBindDueToDevTools = false;\n      processBindings(objName,obj);\n      if(!eligibleForDevTools || !useDevTools) return;\n      if(!isARepeatKey(objName)) {\n        devTools.send(`${objName}-bound`, removeRepeatsFromState(state.boundObjects))\n      } \n    } else { \n      state.beforeReadyBindQueue.push({name: objName, obj: obj});\n    }\n  }\n}; \n\nlib.extendNamespace = function(name,method) { \n  lib[name] = method;\n}; \n\nexport default lib; ","import state from '../state';\nimport simpleBind from '../simpleBind';\nimport { FIRST_IN_STRING } from './const/objNameLocation';\n\nvar collection = function(elem,opts){\n  // collection routine, the function that defines the object stored in boundElems\n  opts.simplebind = opts.simplebind.split('.');\n  var configObj = {\n    elem: elem,\n    objName: opts.simplebind.shift(),\n    objKey: opts.simplebind.join('.'),\n    opts: opts\n  };\n  simpleBind.addToBoundElems('simplebind',configObj.objName,configObj);\n};\n\nvar binding = function(config,obj,flush){\n  // binding routine, the function that determines how binding is done for this bind type\n  var val = simpleBind.util.get(obj,config.objKey);\n  var oldVal = simpleBind.util.get(state.boundObjectsLast[config.objName],config.objKey);\n  if(val !== oldVal || flush) {\n    if(typeof config.opts['simplefilter'] != 'undefined') {\n      val = simpleBind.getFilteredValue(val,config.opts.simplefilter);\n    }\n    val = typeof val == 'string' ? val : JSON.stringify(val,null,2);\n    if(typeof config.opts['simplebindhtml'] != 'undefined' && config.opts.simplebindhtml==\"true\") {\n      config.elem.innerHTML = val;\n    } else {\n      if(config.elem.childNodes.length) {\n        config.elem.childNodes[0].nodeValue = val;\n      } else {\n        config.elem.appendChild(document.createTextNode(val));\n      }\n    }\n  }\n};\n\n// uses default objNameRegex ('data-simplebind=\"objName.objKey\"')\nsimpleBind.registerBindType('simplebind',{\n  collection, \n  binding,\n  objNameLocation: FIRST_IN_STRING\n});","import state from '../state';\nimport simpleBind from '../simpleBind';\nimport { COLON_SEPARATED_SECOND_GROUP } from './const/objNameLocation';\n\nstate.bindHandlers = { };\n\nvar collection = function(elem,opts){\n  // collection routine, the function that defines the object stored in boundElems\n  var bindHandlers = opts.simplebindhandler.split(',');\n  for(var i=0; i < bindHandlers.length; ++i) {\n    bindHandlers[i] = bindHandlers[i].split(':');\n    var configObj = {\n      elem: elem,\n      handler: bindHandlers[i].shift()\n    };\n    bindHandlers[i] = bindHandlers[i].shift().split('.');\n    configObj.objName = bindHandlers[i].shift();\n    configObj.objKey = bindHandlers[i].join('.');\n    simpleBind.addToBoundElems('simplebindhandler',configObj.objName,configObj);\n  }\n};\n\nvar binding = function(config,obj,flush){\n  // binding routine, the function that determines how binding is done for this bind type\n  if(typeof state.bindHandlers[config.handler] != 'undefined') {\n    var val = simpleBind.util.get(obj,config.objKey)\n      , oldVal = simpleBind.util.get(state.boundObjectsLast[config.objName],config.objKey);\n    var change = typeof val == 'object' ? JSON.stringify(val) != JSON.stringify(oldVal) : val != oldVal;\n    if(change || flush) {\n      state.bindHandlers[config.handler](config.elem,simpleBind.util.get(obj,config.objKey),config.objName);\n    }\n  }\n};\n\nvar registerBindHandler = function(handlerName,func) {\n  if(typeof func == 'function') {\n    state.bindHandlers[handlerName] = func;\n  }\n};\n\n\nsimpleBind.registerBindType('simplebindhandler', {\n  collection,\n  binding,\n  objNameLocation: COLON_SEPARATED_SECOND_GROUP\n});\nsimpleBind.extendNamespace('registerBindHandler', registerBindHandler);","import state from '../state';\nimport simpleBind from '../simpleBind';\nimport { FIRST_IN_STRING } from './const/objNameLocation';\n\n// define two flags that are used to help us determine flow/bubbling and prevent indefinite recursion: \n//  1. eventDispatchMarker: this is applied when we programatically trigger a change event on an input\n//  2. changeInitiatorMarker: this is applied to bindvalue input when it invokes a change \nvar eventDispatchMarker = 'data-simpleeventdispatch'\n  , changeInitiatorMarker = 'data-simplebindvaluechanger';\n\n/**\n * handleInput() is an event callback to handle changes to simplebindvalue-bound inputs\n */\nvar handleInput = function() {\n  // check if we are simply dispatching an event from the bindingRoutine callback\n  if(this.getAttribute(eventDispatchMarker)) return this.removeAttribute(eventDispatchMarker);\n  // we are not, we need to update other items that are bound to same object.property: \n  var binding = this.getAttribute('data-simplebindvalue').split('.')\n    , objName = binding.shift();\n  // in case this object hasn't been set yet, for whatever reason, set it to a blank object:\n  if(typeof state.boundObjects[objName] == 'undefined') state.boundObjects[objName] = {};\n  this.setAttribute(changeInitiatorMarker,'true');\n  simpleBind.util.set(state.boundObjects[objName],binding.join('.'),getInputValue(this));\n  simpleBind.bind(objName,state.boundObjects[objName]);\n  if(objName.indexOf('__repeat') > -1) {\n    var originalObjName = state.repeatDictionary[objName.split('-').shift()];\n    simpleBind.bind(originalObjName,state.boundObjects[originalObjName]);\n  }\n};\n\nvar rateLimitInput = function() {\n  var elem = this;\n  simpleBind.util.delay(function(){\n    handleInput.call(elem);\n  },50)\n};\n\nvar getInputType = function(elem) {\n  var type, tagName = elem.tagName.toLowerCase();\n  switch(tagName) {\n    case 'input':\n      type = elem.getAttribute('type');\n      return type;\n    default:\n      return tagName;\n  }\n};\n\nvar checkIfInputValueChanged = function(input,currVal) {\n  var type = getInputType(input);\n  // for checkboxes and radio inputs, it is necessary to account for \n  // string vs boolean comparisons since the value attribute on an \n  // input is always a string: \n  switch(type) {\n    case 'checkbox':\n      return String(input.checked) != String(currVal);\n      return false;\n    case 'radio':\n      var radioVal = getInputValue(input);\n      return (input.checked && radioVal != String(currVal)) || (!input.checked && radioVal == String(currVal));\n    default:\n      return currVal != getInputValue(input);\n  }\n};\n\nvar getInputValue = function(elem) {\n  var type = getInputType(elem);\n  switch(type) {\n    case 'checkbox':\n      return elem.checked;\n    default:\n      return elem.value;\n  }\n};\n\nvar attachAppropriateEventHandlers = function(elem,inputType) {\n  switch(inputType) {\n    case 'text':\n    case 'tel':\n    case 'password':\n    case 'textarea':\n    case 'number': \n    case 'email': \n    case 'zip':\n    case 'time':\n      elem.addEventListener('keyup',rateLimitInput);\n    default:\n      elem.addEventListener('change',handleInput);\n      break;\n  }\n};\n\nvar setValue = function(config,val) {\n  switch(config.inputType) {\n    case 'select':\n      var opts = config.elem.getElementsByTagName('option');\n      var selIndex = 0;\n      for(var i=0; i < opts.length; ++i) {\n        if(opts[i].value == val) {\n          selIndex = i;\n          break;\n        }\n      }\n      config.elem.selectedIndex = selIndex;\n      break;\n    case 'radio':\n      config.elem.checked = String(val) == config.elem.value;\n      break;\n    case 'checkbox':\n      config.elem.checked = (val === true || val == 'true');\n      break;\n    case 'textarea':\n      if(config.elem.innerHTML != val) {\n        config.elem.innerHTML = val;\n      }\n      break;\n    case 'text':\n    default:\n      if(val != config.elem.value || flush) {\n        config.elem.value = val;\n      }\n      break;\n  }\n};\n\nvar collection = function(elem,opts){\n  // collection routine, the function that defines the object stored in boundElems\n  opts.simplebindvalue = opts.simplebindvalue.split('.');\n  var configObj = {\n    elem: elem,\n    objName: opts.simplebindvalue.shift(),\n    objKey: opts.simplebindvalue.join('.'),\n    inputType: getInputType(elem),\n    initiatedChange: false\n  };\n  attachAppropriateEventHandlers(elem,configObj.inputType);\n  simpleBind.addToBoundElems('simplebindvalue',configObj.objName,configObj);\n};\n\nvar binding = function(config,obj,flush){\n  // binding routine, the function that determines how binding is done for this bind type\n  var val = simpleBind.util.get(obj,config.objKey);\n  if(checkIfInputValueChanged(config.elem,val)) {\n    // check if this is the element that invoked the change: \n    if(config.elem.getAttribute(changeInitiatorMarker)) {\n      config.elem.removeAttribute(changeInitiatorMarker);\n    } else {\n      // it wasn't, so we need to trigger a change event:\n      setValue(config,val);\n      config.elem.setAttribute(eventDispatchMarker,'true');\n      simpleBind.util.triggerEvent(config.elem,'change');\n    }\n  } else {\n    if(config.elem.getAttribute(changeInitiatorMarker)) {\n      config.elem.removeAttribute(changeInitiatorMarker);\n    }\n  }\n};\n\n// uses default objNameRegex\n\nsimpleBind.registerBindType('simplebindvalue',{\n  collection,\n  binding,\n  objNameLocation: FIRST_IN_STRING\n});","import state from '../state';\nimport simpleBind from '../simpleBind';\nimport { COLON_SEPARATED_SECOND_GROUP } from './const/objNameLocation';\n\nstate.repeatCount = 0;\nstate.repeatDictionary = { };\n\nvar getNewBindingName = function(config,count) {\n  return '__repeat' + config.repeatIndex + '-' + config.innerObjName + count;\n};\n\n/**\n * rewriteBindings() takes a list of elements and rewrites any simplebind binding\n * properties from a specified original object name to a specified new object name\n *\n * @param    {Array}     elems              Nodelist of elements to be processed\n * @param    {String}    originalObjName    Original objName to replace\n * @param    {String}    newObjName         New objName to replace original\n */\nvar rewriteBindings = function(elems,originalObjName,newObjName) {\n  for(var i=0; i < elems.length; ++i) {\n    for(var j=0; j < state.bindTypes.length; ++j) {\n      var attr = 'data-' + state.bindTypes[j]\n        , binding = elems[i].getAttribute(attr);\n      if(binding) {\n        var newBindingVal = simpleBind.util.replaceObjNameInBindingStr(binding,state.bindTypeOpts[state.bindTypes[j]],originalObjName,newObjName);\n        if(newBindingVal != binding) {\n          elems[i].setAttribute(attr,newBindingVal);\n          elems[i].removeAttribute('data-simplebindcollected');\n        } else {\n          // If we have made it this far then the element had a binding string on it but it was\n          // not a member of the array that was bound.  nonetheless, it needs to be recollected\n          // and rebound\n          elems[i].removeAttribute('data-simplebindcollected');\n        }\n      }\n    }\n  }\n};\n\n/**\n * scaleRepeat takes a repeat block and scales the # of repeated elements up or down:\n *\n * @param    {Object}    config    simpleRepeat config object (stored in state.boundElems)\n * @param    {Number}    num       # of desired repeat elements\n */\nvar scaleRepeat = function(config,num) {\n  if(config.repeatedElems.length == num) return;\n  var delta;\n  if(config.repeatedElems.length < num) {\n    // need to add elems\n    delta = num - config.repeatedElems.length;\n    var frag = document.createDocumentFragment();\n    for(var i=0; i < delta; ++i) {\n      var newNode = config.repeatTemplate.cloneNode(true)\n        , innards = newNode.getElementsByTagName('*')\n        , origBind = getNewBindingName(config,0)\n        , newBind = getNewBindingName(config,config.repeatedElems.length);\n      // rebind the base-level node: \n      rewriteBindings([newNode],origBind,newBind);\n      // & then the children: \n      rewriteBindings(innards,origBind,newBind);\n      config.repeatedElems.push(newNode);\n      frag.appendChild(newNode);\n    }\n    config.elem.appendChild(frag);\n    simpleBind.recollectDOM(config.elem,true);\n  } else {\n    // need to remove elems\n    delta = config.repeatedElems.length - num;\n    for(var i=0; i < delta; ++i) {\n      var removed = config.repeatedElems.pop();\n      var objName  = getNewBindingName(config,config.repeatedElems.length);\n      removed.parentNode.removeChild(removed);\n      if(typeof state.boundElems[objName] != 'undefined') delete state.boundElems[objName];\n      if(typeof state.boundObjects[objName] != 'undefined') delete state.boundObjects[objName];\n      if(typeof state.boundObjectsLast[objName] != 'undefined') delete state.boundObjectsLast[objName];\n    }\n  }\n};\n\nvar collection = function(elem,opts){\n  // collection routine, the function that defines the object stored in boundElems\n  opts.simplerepeat = opts.simplerepeat.split(':');\n  var objNameAndKey = opts.simplerepeat.pop().split('.');\n  var configObj = {\n    elem: elem,\n    objName: objNameAndKey.shift(),\n    objKey: objNameAndKey.join('.'),\n    innerObjName: opts.simplerepeat.shift(),\n    repeatedElems: [ ],\n    repeatIndex: state.repeatCount\n  };\n  var innerNodes = elem.getElementsByTagName('*');\n  rewriteBindings(innerNodes,configObj.innerObjName,getNewBindingName(configObj,0));\n  configObj.repeatTemplate = innerNodes[0].parentNode.removeChild(innerNodes[0]);\n  state.repeatDictionary['__repeat' + configObj.repeatIndex] = configObj.objName;\n  ++state.repeatCount;\n  simpleBind.addToBoundElems('simplerepeat',configObj.objName,configObj);\n};\n\nvar binding = function(config,obj,flush){\n  // binding routine, the function that determines how binding is done for this bind type\n  var arrToBind = simpleBind.util.get(obj,config.objKey) || [];\n  if(typeof arrToBind['length'] != 'undefined') {\n    scaleRepeat(config,arrToBind.length);\n    for(var i=0; i < arrToBind.length; ++i) {\n      simpleBind.bind(getNewBindingName(config,i),arrToBind[i]);\n    }\n  }\n};\n\nsimpleBind.registerBindType('simplerepeat', {\n  collection,\n  binding,\n  objNameLocation: COLON_SEPARATED_SECOND_GROUP\n});\nsimpleBind.extendNamespace('rewriteBindings',rewriteBindings);","import state from '../state';\nimport simpleBind from '../simpleBind';\nimport { COLON_SEPARATED_THIRD_GROUP } from './const/objNameLocation';\n\n/*\n\n  Events take the form: 'eventName:eventHandlerName:optionalObjName.key.key'\n    ex: 'click:myClickHandler:someObj.key.key2'\n    or\n    ex: 'click:myClickHandler'     // omitting the object &\n                                      key specifier if not needed\n\n  In above examples, 'myClickHandler' must be registered by calling:\n    ex: simpleBind.registerEvent('myClickHandler',function(event,value){});\n    or\n    ex: simpleBind.registerEvent('myClickHandler',function(event){});\n  respectively.\n\n  Multiple events can be specified as comma-separated values within\n  the data-simpleevent parameter.\n    ex: data-simpleevent=\"click:someEventHandler,hover:someOtherEventHandler\"\n\n  Whenever an event handler is called it will supply 'this' context to the\n  element which emitted the event. (this == element)\n\n*/\n\nstate.eventHandlers = { };\n\nvar addListener = function(elem,eventName,eventHandler,includeObjNameAndKey,objName,objKey) {\n  elem.addEventListener(eventName,function(evt){\n    if(typeof state.eventHandlers[eventHandler] != 'undefined') {\n      if(includeObjNameAndKey) {\n        if(typeof state.boundObjects[objName] != 'undefined') {\n          state.eventHandlers[eventHandler].call(this,evt, simpleBind.util.get(state.boundObjects[objName],objKey));\n          return;\n        }\n      }\n      // still call the event handler even if it obj is undefined\n      return state.eventHandlers[eventHandler].call(this,evt,undefined);\n    }\n  });\n};\n\nvar collection = function(elem,opts) {\n  var events = opts.simpleevent.split(',');\n  for(var i=0; i < events.length; ++i) {\n    var eventArr = events[i].split(':')\n      , eventName = eventArr.shift()\n      , eventHandler = eventArr.shift();\n    var objNameAndKey = eventArr.length ? eventArr.shift().split('.') : false;\n    if(objNameAndKey) {\n      var objName = objNameAndKey.shift()\n        , objKey = objNameAndKey.join('.');\n        addListener(elem,eventName,eventHandler,objNameAndKey,objName,objKey);\n    } else {\n      addListener(elem,eventName,eventHandler,objNameAndKey);\n    }\n  }\n};\n\nvar binding = null;\n\nvar registerEvent = function(eventName,func) {\n  state.eventHandlers[eventName] = func;\n};\n\nsimpleBind.registerBindType('simpleevent',{\n  collection,\n  binding,\n  objNameLocation: COLON_SEPARATED_THIRD_GROUP\n});\nsimpleBind.extendNamespace('registerEvent', registerEvent);","import state from '../state';\nimport simpleBind from '../simpleBind';\nimport { COLON_SEPARATED_SECOND_GROUP } from './const/objNameLocation';\n\nvar collection = function(elem,opts){\n  // collection routine, the function that defines the object stored in boundElems\n  var boundAttrs = opts.simplebindattrs.split(',');\n  for(var i=0; i < boundAttrs.length; ++i) {\n    boundAttrs[i] =  boundAttrs[i].split(':');\n    var configObj = {\n      elem: elem,\n      attr: boundAttrs[i].shift()\n    };\n    boundAttrs[i] = boundAttrs[i].shift().split('.');\n    configObj.objName = boundAttrs[i].shift();\n    configObj.objKey = boundAttrs[i].join('.');\n    simpleBind.addToBoundElems('simplebindattrs',configObj.objName,configObj);\n  }\n};\n\nvar binding = function(config,obj,flush){\n  // binding routine, the function that determines how binding is done for this bind type\n  var val = simpleBind.util.get(obj,config.objKey)\n    , oldVal = simpleBind.util.get(state.boundObjectsLast[config.objName],config.objKey);\n  if(val != oldVal || flush) {\n    config.elem.setAttribute(config.attr,val);\n  }\n};\n\nsimpleBind.registerBindType('simplebindattrs',{\n  collection,\n  binding,\n  objNameLocation: COLON_SEPARATED_SECOND_GROUP\n});","import state from '../state';\nimport simpleBind from '../simpleBind';\nimport { COLON_SEPARATED_SECOND_GROUP } from './const/objNameLocation';\n\n// takes form: data-simpledata=\"thisProp:objName.objKey,otherProp:objName.objKey\"\nvar collection = function(elem,opts){\n  // collection routine, the function that defines the object stored in boundElems\n  var dataProps = opts.simpledata.split(',');\n  for(var i=0; i < dataProps.length; ++i) {\n    var arr = dataProps[i].split(':')\n      , prop = arr.shift();\n    arr = arr.shift().split('.');\n    var configObj = {\n      elem: elem,\n      objName: arr.shift(),\n      objKey: arr.join('.'),\n      prop: prop\n    }\n    simpleBind.addToBoundElems('simpledata',configObj.objName,configObj);\n  }\n};\n\nvar binding = function(config,obj){\n  // binding routine, the function that determines how binding is done for this bind type\n  var prop = 'data-' + config.prop.replace(/\\W+/g, '-').replace(/([a-z\\d])([A-Z])/g, '$1-$2');\n  config.elem.setAttribute(prop, simpleBind.util.get(obj,config.objKey));\n};\n\nsimpleBind.registerBindType('simpledata',{\n  collection,\n  binding,\n  objNameLocation: COLON_SEPARATED_SECOND_GROUP\n});","import state from '../state';\nimport simpleBind from '../simpleBind';\n\nstate.filters = { };\n\nvar getFilteredValue = function(val,filterStr) {\n  filterStr = filterStr.split(',');\n  for(var i=0; i < filterStr.length; ++i) {\n    if(typeof state.filters[filterStr[i]] != 'undefined') {\n      val = state.filters[filterStr[i]](val)\n    }\n  }\n  return val;\n};\n\nvar registerFilter = function(filterName,fn) {\n  if(typeof fn == 'function') {\n    state.filters[filterName] = fn;\n  }\n};\n\nsimpleBind.extendNamespace('getFilteredValue',getFilteredValue);\nsimpleBind.extendNamespace('registerFilter',registerFilter);"],"names":["const","arguments","let","objNameLocations.FIRST_IN_STRING","objNameLocations.COLON_SEPARATED_SECOND_GROUP","objNameLocations.COLON_SEPARATED_THIRD_GROUP","devTools","util.getData","util.extend","simpleBind","collection","binding"],"mappings":"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"}